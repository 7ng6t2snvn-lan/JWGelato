<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0B1120">
  <title>Shot Tracker</title>
  <link rel="manifest" href="./manifest.json">
  <link rel="apple-touch-icon" href="./icon-192.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    :root {
      --bg-primary: #0B1120; --bg-secondary: #131C2E; --bg-card: #1A2538; --bg-card-hover: #212F45;
      --accent-cyan: #22D3EE; --accent-teal: #14B8A6; --accent-green: #10B981;
      --accent-orange: #F59E0B; --accent-red: #EF4444; --accent-purple: #A78BFA; --accent-pink: #F472B6;
      --text-primary: #F1F5F9; --text-secondary: #94A3B8; --text-muted: #64748B; --border-color: #2D3B4F;
    }
    body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; overflow-x: hidden; }
    #root { min-height: 100vh; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg-secondary); }
    ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; }
    
    .pin-container { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; background: linear-gradient(135deg, var(--bg-primary) 0%, #0F172A 100%); }
    .pin-logo { font-size: 48px; margin-bottom: 16px; }
    .pin-title { font-size: 24px; font-weight: 700; margin-bottom: 8px; }
    .pin-subtitle { font-size: 14px; color: var(--text-secondary); margin-bottom: 32px; }
    .pin-dots { display: flex; gap: 16px; margin-bottom: 32px; }
    .pin-dot { width: 16px; height: 16px; border-radius: 50%; border: 2px solid var(--accent-cyan); background: transparent; transition: all 0.2s; }
    .pin-dot.filled { background: var(--accent-cyan); box-shadow: 0 0 12px rgba(34, 211, 238, 0.5); }
    .pin-dot.error { border-color: var(--accent-red); background: var(--accent-red); animation: shake 0.4s; }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }
    .pin-keypad { display: grid; grid-template-columns: repeat(3, 72px); gap: 16px; }
    .pin-key { width: 72px; height: 72px; border-radius: 50%; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-primary); font-size: 28px; font-weight: 600; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; justify-content: center; }
    .pin-key:hover { background: var(--bg-card-hover); border-color: var(--accent-cyan); }
    .pin-key:active { transform: scale(0.95); background: var(--accent-cyan); color: var(--bg-primary); }
    .pin-key.empty { visibility: hidden; }
    
    .app-container { max-width: 430px; margin: 0 auto; min-height: 100vh; background: var(--bg-primary); padding-bottom: 80px; }
    .header { padding: 16px 20px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); position: sticky; top: 0; z-index: 100; }
    .header-top { display: flex; justify-content: space-between; align-items: center; }
    .header-title { font-size: 20px; font-weight: 700; }
    .header-date { font-size: 13px; color: var(--text-secondary); }
    .header-actions { display: flex; gap: 8px; }
    .icon-btn { width: 36px; height: 36px; border-radius: 10px; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.15s; }
    .icon-btn:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    
    .tab-nav { display: flex; gap: 8px; padding: 12px 20px; background: var(--bg-secondary); overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .tab-nav::-webkit-scrollbar { display: none; }
    .tab-btn { padding: 8px 16px; border-radius: 20px; border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); font-size: 13px; font-weight: 500; cursor: pointer; white-space: nowrap; transition: all 0.15s; }
    .tab-btn.active { background: var(--accent-cyan); color: var(--bg-primary); border-color: var(--accent-cyan); }
    .tab-btn:not(.active):hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    
    .calendar-strip { padding: 16px 20px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); }
    .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .calendar-month { font-size: 16px; font-weight: 600; }
    .calendar-nav { display: flex; gap: 8px; }
    .calendar-nav-btn { padding: 6px 12px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-secondary); cursor: pointer; font-size: 12px; }
    .calendar-days { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px; -webkit-overflow-scrolling: touch; }
    .calendar-days::-webkit-scrollbar { display: none; }
    .calendar-day { flex-shrink: 0; width: 44px; padding: 8px 4px; border-radius: 12px; background: var(--bg-card); border: 1px solid var(--border-color); text-align: center; cursor: pointer; transition: all 0.15s; }
    .calendar-day:hover { border-color: var(--accent-cyan); }
    .calendar-day.selected { background: var(--accent-cyan); border-color: var(--accent-cyan); }
    .calendar-day.today { border-color: var(--accent-teal); }
    .calendar-day-name { font-size: 10px; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; }
    .calendar-day.selected .calendar-day-name { color: var(--bg-primary); }
    .calendar-day-num { font-size: 16px; font-weight: 600; }
    .calendar-day.selected .calendar-day-num { color: var(--bg-primary); }
    .calendar-day-dots { display: flex; justify-content: center; gap: 3px; margin-top: 4px; min-height: 6px; }
    .calendar-day-dot { width: 5px; height: 5px; border-radius: 50%; background: var(--accent-teal); }
    .calendar-day.selected .calendar-day-dot { background: var(--bg-primary); }
    
    .content { padding: 16px 20px; }
    .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .section-title { font-size: 16px; font-weight: 600; }
    .section-count { font-size: 12px; color: var(--text-muted); background: var(--bg-card); padding: 4px 10px; border-radius: 12px; }
    
    .schedule-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; padding: 16px; margin-bottom: 12px; transition: all 0.15s; }
    .schedule-card:hover { border-color: var(--accent-cyan); }
    .schedule-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
    .schedule-card-info { flex: 1; }
    .schedule-card-name { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
    .schedule-card-dose { font-size: 13px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; }
    .schedule-card-badge { padding: 4px 10px; border-radius: 8px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
    .badge-morning { background: rgba(251, 191, 36, 0.15); color: #FBBF24; }
    .badge-evening { background: rgba(139, 92, 246, 0.15); color: #A78BFA; }
    .badge-anytime { background: rgba(34, 211, 238, 0.15); color: var(--accent-cyan); }
    .schedule-card-details { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }
    .schedule-detail { display: flex; align-items: center; gap: 4px; font-size: 12px; color: var(--text-secondary); }
    .schedule-detail svg { width: 14px; height: 14px; color: var(--text-muted); }
    .schedule-card-actions { display: flex; gap: 8px; }
    .action-btn { flex: 1; padding: 10px 16px; border-radius: 10px; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text-secondary); font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; justify-content: center; gap: 6px; }
    .action-btn:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    .action-btn.taken { background: rgba(16, 185, 129, 0.15); border-color: var(--accent-green); color: var(--accent-green); }
    .action-btn.skipped { background: rgba(239, 68, 68, 0.15); border-color: var(--accent-red); color: var(--accent-red); }
    
    .status-indicator { display: flex; align-items: center; gap: 6px; font-size: 12px; padding: 6px 12px; border-radius: 8px; margin-bottom: 12px; }
    .status-taken { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); }
    .status-skipped { background: rgba(239, 68, 68, 0.1); color: var(--accent-red); }
    .schedule-notes { font-size: 12px; color: var(--text-muted); font-style: italic; padding-top: 8px; border-top: 1px solid var(--border-color); }
    .cycle-progress { margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-color); }
    .cycle-label { font-size: 11px; color: var(--text-muted); margin-bottom: 6px; display: flex; justify-content: space-between; }
    .cycle-bar { height: 4px; background: var(--bg-secondary); border-radius: 2px; overflow: hidden; }
    .cycle-fill { height: 100%; background: linear-gradient(90deg, var(--accent-cyan), var(--accent-teal)); border-radius: 2px; transition: width 0.3s; }
    
    .add-schedule-btn { width: 100%; padding: 16px; border-radius: 16px; border: 2px dashed var(--border-color); background: transparent; color: var(--text-secondary); font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 12px; }
    .add-schedule-btn:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    
    .bottom-nav { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 430px; background: var(--bg-secondary); border-top: 1px solid var(--border-color); display: flex; justify-content: space-around; padding: 8px 16px; padding-bottom: max(8px, env(safe-area-inset-bottom)); }
    .nav-item { display: flex; flex-direction: column; align-items: center; padding: 8px 12px; border-radius: 12px; background: transparent; border: none; color: var(--text-muted); cursor: pointer; transition: all 0.15s; }
    .nav-item.active { color: var(--accent-cyan); }
    .nav-item svg { width: 22px; height: 22px; margin-bottom: 4px; }
    .nav-item span { font-size: 10px; font-weight: 500; }
    
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: flex; align-items: flex-end; justify-content: center; z-index: 1000; animation: fadeIn 0.2s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .modal { width: 100%; max-width: 430px; max-height: 90vh; background: var(--bg-secondary); border-radius: 24px 24px 0 0; padding: 20px; overflow-y: auto; animation: slideUp 0.3s; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    .modal-handle { width: 40px; height: 4px; background: var(--border-color); border-radius: 2px; margin: 0 auto 16px; }
    .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .modal-title { font-size: 18px; font-weight: 600; }
    .modal-close { width: 44px; height: 44px; border-radius: 50%; border: 2px solid #ff4444; background: rgba(255, 68, 68, 0.25); color: #ff4444; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: 700; transition: all 0.15s; box-shadow: 0 2px 8px rgba(255, 68, 68, 0.3); }
    .modal-close:hover { background: #ff4444; color: white; transform: scale(1.1); }
    .modal-close svg { width: 24px; height: 24px; stroke-width: 3; }
    
    .back-btn { display: flex; align-items: center; gap: 6px; padding: 12px 20px; border-radius: 12px; border: 2px solid #ff9500; background: rgba(255, 149, 0, 0.25); color: #ff9500; font-size: 15px; font-weight: 700; cursor: pointer; transition: all 0.15s; box-shadow: 0 2px 8px rgba(255, 149, 0, 0.3); }
    .back-btn:hover { background: #ff9500; color: var(--bg-primary); transform: scale(1.02); }
    .back-btn svg { width: 20px; height: 20px; stroke-width: 2.5; }
    
    .form-group { margin-bottom: 16px; }
    .form-label { display: block; font-size: 13px; font-weight: 500; color: var(--text-secondary); margin-bottom: 8px; }
    .form-input { width: 100%; padding: 12px 16px; border-radius: 12px; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-primary); font-size: 14px; font-family: inherit; transition: border-color 0.15s; }
    .form-input:focus { outline: none; border-color: var(--accent-cyan); }
    .form-input::placeholder { color: var(--text-muted); }
    .form-select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2394A3B8' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 40px; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .day-selector { display: flex; flex-wrap: wrap; gap: 8px; }
    .day-chip { padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-secondary); font-size: 13px; cursor: pointer; transition: all 0.15s; }
    .day-chip.selected { background: var(--accent-cyan); border-color: var(--accent-cyan); color: var(--bg-primary); }
    .form-submit { width: 100%; padding: 14px; border-radius: 12px; border: none; background: var(--accent-cyan); color: var(--bg-primary); font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.15s; margin-top: 8px; }
    .form-submit:hover { background: var(--accent-teal); }
    .form-delete { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid var(--accent-red); background: transparent; color: var(--accent-red); font-size: 15px; font-weight: 600; cursor: pointer; margin-top: 8px; }
    
    .empty-state { text-align: center; padding: 40px 20px; }
    .empty-state-icon { font-size: 48px; margin-bottom: 16px; }
    .empty-state-title { font-size: 16px; font-weight: 600; margin-bottom: 8px; }
    .empty-state-text { font-size: 14px; color: var(--text-secondary); }
    
    .settings-section { margin-bottom: 24px; }
    .settings-title { font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px; }
    .settings-item { display: flex; justify-content: space-between; align-items: center; padding: 14px 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 8px; cursor: pointer; transition: all 0.15s; }
    .settings-item:hover { border-color: var(--accent-cyan); }
    .settings-item-label { font-size: 14px; }
    .settings-item-value { font-size: 13px; color: var(--text-muted); }
    
    .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; }
    .stat-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; padding: 16px; text-align: center; }
    .stat-value { font-size: 28px; font-weight: 700; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; }
    .stat-label { font-size: 12px; color: var(--text-muted); margin-top: 4px; }
    
    .search-container { margin-bottom: 16px; }
    .search-input { width: 100%; padding: 12px 16px 12px 44px; border-radius: 12px; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-primary); font-size: 14px; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%2364748B' stroke-width='2'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='M21 21l-4.35-4.35'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: 14px center; }
    .search-input:focus { outline: none; border-color: var(--accent-cyan); }
    
    .peptide-list-item { display: flex; justify-content: space-between; align-items: center; padding: 14px 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 8px; cursor: pointer; transition: all 0.15s; }
    .peptide-list-item:hover { border-color: var(--accent-cyan); }
    .peptide-list-info h4 { font-size: 14px; font-weight: 500; margin-bottom: 2px; }
    .peptide-list-info p { font-size: 12px; color: var(--text-muted); }
    .peptide-category-badge { padding: 4px 8px; border-radius: 6px; font-size: 10px; font-weight: 600; text-transform: uppercase; }
    .category-fda { background: rgba(16, 185, 129, 0.15); color: var(--accent-green); }
    .category-bio { background: rgba(167, 139, 250, 0.15); color: var(--accent-purple); }
    .category-research { background: rgba(34, 211, 238, 0.15); color: var(--accent-cyan); }
    
    .purpose-badge { padding: 3px 8px; border-radius: 6px; font-size: 9px; font-weight: 600; text-transform: uppercase; margin-left: 6px; }
    .purpose-healing { background: rgba(16, 185, 129, 0.2); color: #34D399; }
    .purpose-muscle { background: rgba(239, 68, 68, 0.2); color: #F87171; }
    .purpose-fatloss { background: rgba(251, 191, 36, 0.2); color: #FBBF24; }
    .purpose-gh { background: rgba(167, 139, 250, 0.2); color: #A78BFA; }
    .purpose-cognitive { background: rgba(96, 165, 250, 0.2); color: #60A5FA; }
    .purpose-immune { background: rgba(45, 212, 191, 0.2); color: #2DD4BF; }
    .purpose-antiaging { background: rgba(244, 114, 182, 0.2); color: #F472B6; }
    .purpose-metabolic { background: rgba(251, 146, 60, 0.2); color: #FB923C; }
    .purpose-skin { background: rgba(192, 132, 252, 0.2); color: #C084FC; }
    .purpose-sexual { background: rgba(244, 63, 94, 0.2); color: #FB7185; }
    .purpose-hormone { background: rgba(34, 211, 238, 0.2); color: #22D3EE; }
    .purpose-diabetes { background: rgba(74, 222, 128, 0.2); color: #4ADE80; }
    
    .inventory-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; padding: 16px; margin-bottom: 12px; }
    .inventory-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
    .inventory-name { font-size: 15px; font-weight: 600; }
    .inventory-meta { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
    .inventory-badge { padding: 4px 10px; border-radius: 8px; font-size: 11px; font-weight: 600; }
    .inventory-badge.low { background: rgba(239, 68, 68, 0.15); color: var(--accent-red); }
    .inventory-badge.ok { background: rgba(16, 185, 129, 0.15); color: var(--accent-green); }
    .inventory-badge.empty { background: rgba(100, 116, 139, 0.15); color: var(--text-muted); }
    .inventory-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px; }
    .inventory-stat { text-align: center; padding: 8px; background: var(--bg-secondary); border-radius: 8px; }
    .inventory-stat-value { font-size: 14px; font-weight: 600; font-family: 'JetBrains Mono', monospace; color: var(--accent-cyan); }
    .inventory-stat-label { font-size: 10px; color: var(--text-muted); margin-top: 2px; }
    .inventory-progress { height: 6px; background: var(--bg-secondary); border-radius: 3px; overflow: hidden; }
    .inventory-progress-fill { height: 100%; border-radius: 3px; transition: width 0.3s; }
    .inventory-progress-fill.high { background: var(--accent-green); }
    .inventory-progress-fill.medium { background: var(--accent-orange); }
    .inventory-progress-fill.low { background: var(--accent-red); }
    .inventory-actions { display: flex; gap: 8px; margin-top: 12px; }
    .inventory-btn { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text-primary); font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.15s; }
    .inventory-btn:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    .inventory-btn.primary { background: var(--accent-cyan); border-color: var(--accent-cyan); color: var(--bg-primary); }
    
    .filter-tabs { display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; }
    .filter-tab { padding: 6px 12px; border-radius: 16px; border: 1px solid var(--border-color); background: transparent; color: var(--text-secondary); font-size: 12px; cursor: pointer; transition: all 0.15s; }
    .filter-tab.active { background: var(--accent-cyan); color: var(--bg-primary); border-color: var(--accent-cyan); }
    
    .history-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 8px; }
    .history-status { width: 8px; height: 8px; border-radius: 50%; }
    .history-status.taken { background: var(--accent-green); }
    .history-status.skipped { background: var(--accent-red); }
    .history-info { flex: 1; }
    .history-name { font-size: 14px; font-weight: 500; }
    .history-time { font-size: 12px; color: var(--text-muted); }
    .history-dose { font-size: 13px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; }
    
    .peptide-suggestions { max-height: 200px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 12px; margin-top: 8px; }
    .peptide-suggestion { padding: 12px 16px; cursor: pointer; border-bottom: 1px solid var(--border-color); transition: background 0.15s; }
    .peptide-suggestion:last-child { border-bottom: none; }
    .peptide-suggestion:hover { background: var(--bg-card-hover); }
    .peptide-suggestion-name { font-size: 14px; font-weight: 500; }
    .peptide-suggestion-info { font-size: 12px; color: var(--text-muted); }
    
    /* Calculator Styles */
    .calc-section { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; padding: 16px; margin-bottom: 16px; }
    .calc-section-title { font-size: 14px; font-weight: 600; color: var(--accent-cyan); margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
    .calc-input-group { margin-bottom: 16px; }
    .calc-input-label { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; display: block; }
    .calc-input { width: 100%; padding: 14px 16px; border-radius: 12px; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text-primary); font-size: 18px; font-family: 'JetBrains Mono', monospace; text-align: center; }
    .calc-input:focus { outline: none; border-color: var(--accent-cyan); }
    .calc-input::placeholder { color: var(--text-muted); font-size: 14px; }
    .water-buttons { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px; }
    .water-btn { padding: 12px; border-radius: 10px; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text-primary); font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.15s; }
    .water-btn:hover { border-color: var(--accent-cyan); }
    .water-btn.active { background: var(--accent-cyan); color: var(--bg-primary); border-color: var(--accent-cyan); }
    .calc-result { background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%); border: 2px solid var(--accent-cyan); border-radius: 16px; padding: 20px; text-align: center; margin-bottom: 16px; }
    .calc-result-label { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
    .calc-result-value { font-size: 36px; font-weight: 700; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; }
    .calc-result-unit { font-size: 16px; color: var(--text-secondary); margin-left: 4px; }
    
    /* Syringe Visualization */
    .syringe-container { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px; margin-bottom: 16px; }
    .syringe-title { font-size: 12px; color: var(--text-muted); text-align: center; margin-bottom: 16px; }
    .syringe-wrapper { position: relative; padding: 20px 10px; }
    .syringe { position: relative; height: 50px; background: linear-gradient(180deg, #f0f0f0 0%, #e0e0e0 50%, #d0d0d0 100%); border-radius: 6px; border: 2px solid #999; overflow: hidden; }
    .syringe-fill { position: absolute; left: 0; top: 0; bottom: 0; background: linear-gradient(180deg, var(--accent-cyan) 0%, #0ea5e9 100%); transition: width 0.3s ease; border-radius: 4px 0 0 4px; }
    .syringe-plunger { position: absolute; right: -20px; top: 50%; transform: translateY(-50%); width: 24px; height: 60px; background: linear-gradient(90deg, #888 0%, #aaa 50%, #888 100%); border-radius: 0 4px 4px 0; border: 2px solid #666; }
    .syringe-plunger::after { content: ''; position: absolute; left: -2px; top: 50%; transform: translateY(-50%); width: 4px; height: 70px; background: #666; border-radius: 2px; }
    .syringe-needle { position: absolute; left: -30px; top: 50%; transform: translateY(-50%); width: 30px; height: 4px; background: linear-gradient(180deg, #ccc 0%, #999 100%); }
    .syringe-needle::before { content: ''; position: absolute; left: -8px; top: 50%; transform: translateY(-50%); width: 0; height: 0; border-top: 3px solid transparent; border-bottom: 3px solid transparent; border-right: 8px solid #999; }
    .syringe-markings { position: absolute; top: -18px; left: 0; right: 0; display: flex; justify-content: space-between; padding: 0 2px; }
    .syringe-mark { font-size: 9px; color: var(--text-muted); font-family: 'JetBrains Mono', monospace; }
    .syringe-ticks { position: absolute; bottom: -8px; left: 0; right: 0; display: flex; justify-content: space-between; padding: 0 2px; }
    .syringe-tick { width: 1px; height: 6px; background: var(--text-muted); }
    .syringe-tick.major { height: 10px; background: var(--text-secondary); }
    .dose-indicator { position: absolute; top: -28px; transform: translateX(-50%); background: var(--accent-cyan); color: var(--bg-primary); padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; font-family: 'JetBrains Mono', monospace; white-space: nowrap; }
    .dose-indicator::after { content: ''; position: absolute; bottom: -4px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 4px solid transparent; border-right: 4px solid transparent; border-top: 4px solid var(--accent-cyan); }
    
    .calc-info { background: rgba(34, 211, 238, 0.1); border: 1px solid rgba(34, 211, 238, 0.3); border-radius: 12px; padding: 12px 16px; margin-top: 16px; }
    .calc-info-title { font-size: 12px; font-weight: 600; color: var(--accent-cyan); margin-bottom: 4px; }
    .calc-info-text { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;
    
    const CORRECT_PIN = '0119';
    
    // FULL 97 PEPTIDE DATABASE with Purpose Categories
    const PEPTIDE_DATABASE = [
      // ═══════════════════════════════════════════════════════════════
      // HEALING & RECOVERY
      // ═══════════════════════════════════════════════════════════════
      { id: 52, name: 'BPC-157', category: 'Healing & Recovery', purpose: 'Tissue Repair', 
        uses: 'Accelerates healing of tendons, ligaments, muscles, gut lining. Promotes angiogenesis and reduces inflammation. Protective against NSAIDs and alcohol damage.', 
        defaultDose: '250-500mcg', frequency: 'Twice daily', halfLife: '4 hours', 
        adminRoute: 'SubQ near injury or systemic', stacksWith: 'TB-500, GHK-Cu', cycleLength: '4-12 weeks' },
      
      { id: 53, name: 'TB-500 (Thymosin Beta-4)', category: 'Healing & Recovery', purpose: 'Tissue Repair', 
        uses: 'Promotes cell migration and tissue regeneration. Improves flexibility, reduces inflammation. Excellent for muscle tears, tendon injuries, and cardiac repair.', 
        defaultDose: '2-5mg', frequency: '2x weekly', halfLife: '~2 weeks (systemic)', 
        adminRoute: 'SubQ or IM', stacksWith: 'BPC-157, GHK-Cu', cycleLength: '4-8 weeks loading, then maintenance' },
      
      { id: 54, name: 'GHK-Cu (Copper Peptide)', category: 'Healing & Recovery', purpose: 'Regeneration', 
        uses: 'Stimulates collagen, elastin production. Wound healing, anti-inflammatory, antioxidant. Promotes hair growth and skin rejuvenation. Remodels damaged tissue.', 
        defaultDose: '1-2mg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ, topical, or microneedling', stacksWith: 'BPC-157, TB-500', cycleLength: '4-12 weeks' },
      
      { id: 80, name: 'KPV', category: 'Healing & Recovery', purpose: 'Anti-inflammatory', 
        uses: 'Alpha-MSH fragment with potent anti-inflammatory effects. Excellent for gut inflammation, IBD, colitis. Also used for skin conditions and wound healing.', 
        defaultDose: '200-500mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'BPC-157, LL-37', cycleLength: '4-8 weeks' },
      
      { id: 81, name: 'VIP (Vasoactive Intestinal Peptide)', category: 'Healing & Recovery', purpose: 'CIRS/Mold Recovery', 
        uses: 'Critical for CIRS (Chronic Inflammatory Response Syndrome) and mold illness recovery. Regulates inflammation, improves breathing, protects neurons.', 
        defaultDose: '50mcg', frequency: '4x daily (nasal)', halfLife: '1-2 minutes', 
        adminRoute: 'Nasal spray', stacksWith: 'BPC-157', cycleLength: 'Until symptoms resolve' },
      
      { id: 95, name: 'BPC-157/TB-500 Combo', category: 'Healing & Recovery', purpose: 'Enhanced Healing', 
        uses: 'Synergistic combination for accelerated tissue repair. BPC-157 initiates healing while TB-500 promotes systemic regeneration. Gold standard for injury recovery.', 
        defaultDose: '500mcg BPC + 2mg TB-500', frequency: 'BPC 2x daily, TB-500 2x weekly', halfLife: 'Variable', 
        adminRoute: 'SubQ', stacksWith: 'GHK-Cu, Ipamorelin', cycleLength: '6-12 weeks' },
      
      { id: 15, name: 'Teriparatide (Forteo)', category: 'Healing & Recovery', purpose: 'Bone Healing', 
        uses: 'FDA-approved for osteoporosis. Stimulates new bone formation. Used for fracture healing and bone density improvement.', 
        defaultDose: '20mcg', frequency: 'Daily', halfLife: '1 hour', 
        adminRoute: 'SubQ', stacksWith: 'Calcium, Vitamin D', cycleLength: 'Up to 2 years' },
      
      // ═══════════════════════════════════════════════════════════════
      // WEIGHT LOSS & METABOLISM
      // ═══════════════════════════════════════════════════════════════
      { id: 2, name: 'Tirzepatide (Mounjaro/Zepbound)', category: 'Weight Loss', purpose: 'GLP-1/GIP Agonist', 
        uses: 'Dual GLP-1/GIP agonist. Superior weight loss vs semaglutide (~20-25% body weight). Reduces appetite, slows gastric emptying, improves insulin sensitivity.', 
        defaultDose: '2.5-15mg', frequency: 'Weekly', halfLife: '5 days', 
        adminRoute: 'SubQ', stacksWith: 'Exercise, protein intake', cycleLength: 'Long-term' },
      
      { id: 1, name: 'Semaglutide (Ozempic/Wegovy)', category: 'Weight Loss', purpose: 'GLP-1 Agonist', 
        uses: 'GLP-1 receptor agonist. Reduces appetite and food intake. ~15% body weight loss. Also improves cardiovascular outcomes and blood sugar control.', 
        defaultDose: '0.25-2.4mg', frequency: 'Weekly', halfLife: '7 days', 
        adminRoute: 'SubQ or oral', stacksWith: 'Exercise, protein intake', cycleLength: 'Long-term' },
      
      { id: 96, name: 'Retatrutide', category: 'Weight Loss', purpose: 'Triple Agonist', 
        uses: 'Triple agonist (GLP-1/GIP/Glucagon). Most potent weight loss peptide in trials (~24% body weight). Also improves fatty liver and metabolic markers.', 
        defaultDose: '1-12mg', frequency: 'Weekly', halfLife: '~6 days', 
        adminRoute: 'SubQ', stacksWith: 'Exercise, protein', cycleLength: 'Long-term' },
      
      { id: 9, name: 'Tesamorelin (Egrifta)', category: 'Weight Loss', purpose: 'GH Releasing/Fat Loss', 
        uses: 'FDA-approved GHRH analog. Specifically reduces visceral (belly) fat. Increases IGF-1 and GH without significant hunger or water retention. Popular in TRT protocols.', 
        defaultDose: '1-2mg', frequency: 'Daily', halfLife: '26-38 minutes', 
        adminRoute: 'SubQ (abdomen preferred)', stacksWith: 'Ipamorelin, CJC-1295', cycleLength: '8-12 week cycles' },
      
      { id: 65, name: 'AOD-9604', category: 'Weight Loss', purpose: 'Fat Loss', 
        uses: 'Modified HGH fragment that stimulates lipolysis without affecting blood sugar or growth. Burns fat without muscle-building effects of full GH.', 
        defaultDose: '300mcg', frequency: 'Daily (fasted)', halfLife: 'Very short', 
        adminRoute: 'SubQ', stacksWith: 'Fasted cardio', cycleLength: '12 weeks' },
      
      { id: 66, name: 'Fragment 176-191', category: 'Weight Loss', purpose: 'Fat Loss', 
        uses: 'HGH fragment responsible for fat burning. Does not affect insulin or blood sugar. Best taken fasted. Targets stubborn fat areas.', 
        defaultDose: '250-500mcg', frequency: 'Daily (fasted)', halfLife: '30 minutes', 
        adminRoute: 'SubQ', stacksWith: 'Fasted cardio, AOD-9604', cycleLength: '8-12 weeks' },
      
      { id: 3, name: 'Liraglutide (Saxenda)', category: 'Weight Loss', purpose: 'GLP-1 Agonist', 
        uses: 'Daily GLP-1 agonist. ~8% body weight loss. Good option for those who prefer daily dosing over weekly injections.', 
        defaultDose: '0.6-3mg', frequency: 'Daily', halfLife: '13 hours', 
        adminRoute: 'SubQ', stacksWith: 'Exercise, diet', cycleLength: 'Long-term' },
      
      { id: 5, name: 'Exenatide (Byetta)', category: 'Weight Loss', purpose: 'GLP-1 Agonist', 
        uses: 'First GLP-1 agonist. Modest weight loss, good blood sugar control. Twice daily dosing. Extended release version (Bydureon) is weekly.', 
        defaultDose: '5-10mcg', frequency: 'Twice daily', halfLife: '2.4 hours', 
        adminRoute: 'SubQ', stacksWith: 'Metformin', cycleLength: 'Long-term' },
      
      // ═══════════════════════════════════════════════════════════════
      // GROWTH HORMONE & ANTI-AGING
      // ═══════════════════════════════════════════════════════════════
      { id: 55, name: 'Ipamorelin', category: 'Growth Hormone', purpose: 'GH Secretagogue', 
        uses: 'Clean GH release without hunger or cortisol spike. Excellent sleep quality, recovery, and body composition. One of the safest GH peptides.', 
        defaultDose: '200-300mcg', frequency: '2-3x daily', halfLife: '2 hours', 
        adminRoute: 'SubQ', stacksWith: 'CJC-1295 (no DAC), Tesamorelin', cycleLength: '3-6 months, then break' },
      
      { id: 57, name: 'CJC-1295 (no DAC/Mod GRF 1-29)', category: 'Growth Hormone', purpose: 'GHRH Analog', 
        uses: 'Stimulates natural GH pulse. Short half-life for more natural release pattern. Best combined with a GHRP like Ipamorelin for synergy.', 
        defaultDose: '100mcg', frequency: '2-3x daily', halfLife: '30 minutes', 
        adminRoute: 'SubQ', stacksWith: 'Ipamorelin, GHRP-2/6', cycleLength: '3-6 months' },
      
      { id: 56, name: 'CJC-1295 (with DAC)', category: 'Growth Hormone', purpose: 'GHRH Analog', 
        uses: 'Long-acting GHRH analog. Provides sustained GH elevation. Once or twice weekly dosing. May cause more water retention than no-DAC version.', 
        defaultDose: '1-2mg', frequency: 'Weekly', halfLife: '8+ days', 
        adminRoute: 'SubQ', stacksWith: 'Ipamorelin (on non-DAC days)', cycleLength: '3-6 months' },
      
      { id: 61, name: 'MK-677 (Ibutamoren)', category: 'Growth Hormone', purpose: 'GH Secretagogue', 
        uses: 'Oral GH secretagogue. Increases GH and IGF-1. Improves sleep, appetite, and recovery. May cause water retention and increased hunger.', 
        defaultDose: '10-25mg', frequency: 'Daily (oral)', halfLife: '24 hours', 
        adminRoute: 'Oral', stacksWith: 'Can be used alone or with peptides', cycleLength: '8-12 weeks on, 4 weeks off' },
      
      { id: 94, name: 'CJC/Ipamorelin Combo', category: 'Growth Hormone', purpose: 'GH Synergy', 
        uses: 'Gold standard GH peptide stack. CJC amplifies the GH pulse from Ipamorelin. Better results than either alone. Popular for anti-aging and body composition.', 
        defaultDose: '100mcg each', frequency: '2-3x daily', halfLife: 'Variable', 
        adminRoute: 'SubQ', stacksWith: 'Tesamorelin, BPC-157', cycleLength: '3-6 months' },
      
      { id: 93, name: 'Tesamorelin/Ipamorelin Combo', category: 'Growth Hormone', purpose: 'GH Synergy + Fat Loss', 
        uses: 'Powerful combination for GH release and visceral fat reduction. Tesamorelin targets belly fat while Ipamorelin provides clean GH pulse.', 
        defaultDose: '1-2mg Tesa + 200mcg Ipa', frequency: 'Daily (evening)', halfLife: 'Variable', 
        adminRoute: 'SubQ', stacksWith: 'CJC-1295', cycleLength: '8-12 weeks' },
      
      { id: 58, name: 'GHRP-6', category: 'Growth Hormone', purpose: 'GH Secretagogue', 
        uses: 'Potent GH release with significant hunger increase. Good for those trying to gain weight. Also releases cortisol and prolactin.', 
        defaultDose: '100-300mcg', frequency: '2-3x daily', halfLife: '15-60 minutes', 
        adminRoute: 'SubQ', stacksWith: 'CJC-1295, GHRH', cycleLength: '8-12 weeks' },
      
      { id: 59, name: 'GHRP-2', category: 'Growth Hormone', purpose: 'GH Secretagogue', 
        uses: 'Strong GH release, less hunger than GHRP-6. Moderate cortisol and prolactin increase. Good middle-ground option.', 
        defaultDose: '100-300mcg', frequency: '2-3x daily', halfLife: '15-60 minutes', 
        adminRoute: 'SubQ', stacksWith: 'CJC-1295', cycleLength: '8-12 weeks' },
      
      { id: 60, name: 'Hexarelin', category: 'Growth Hormone', purpose: 'GH Secretagogue', 
        uses: 'Strongest GHRP for GH release. Also has cardioprotective effects. Causes significant cortisol/prolactin increase. Body desensitizes quickly.', 
        defaultDose: '100-200mcg', frequency: '2-3x daily', halfLife: '70 minutes', 
        adminRoute: 'SubQ', stacksWith: 'CJC-1295', cycleLength: '4-8 weeks max' },
      
      { id: 10, name: 'Sermorelin', category: 'Growth Hormone', purpose: 'GHRH Analog', 
        uses: 'Original GHRH analog. Stimulates natural GH release pattern. Gentler than newer peptides. Often prescribed by anti-aging clinics.', 
        defaultDose: '200-300mcg', frequency: 'Daily (bedtime)', halfLife: '10-20 minutes', 
        adminRoute: 'SubQ', stacksWith: 'GHRP-2, Ipamorelin', cycleLength: '3-6 months' },
      
      { id: 31, name: 'Epithalon (Epitalon)', category: 'Anti-Aging', purpose: 'Telomere/Longevity', 
        uses: 'Activates telomerase to lengthen telomeres. Anti-aging effects on pineal gland and melatonin production. May extend cellular lifespan.', 
        defaultDose: '5-10mg', frequency: 'Daily for 10-20 days', halfLife: 'Short', 
        adminRoute: 'SubQ or IV', stacksWith: 'GH peptides', cycleLength: '10-20 day cycles, 2-3x per year' },
      
      { id: 86, name: 'Humanin', category: 'Anti-Aging', purpose: 'Mitochondrial/Neuroprotection', 
        uses: 'Mitochondria-derived peptide. Protects against age-related diseases, Alzheimer\'s, and oxidative stress. Improves insulin sensitivity.', 
        defaultDose: '1-5mg', frequency: 'Daily', halfLife: 'Unknown', 
        adminRoute: 'SubQ', stacksWith: 'MOTS-c, SS-31', cycleLength: '4-8 weeks' },
      
      { id: 84, name: 'SS-31 (Elamipretide)', category: 'Anti-Aging', purpose: 'Mitochondrial', 
        uses: 'Targets and repairs mitochondria. Improves cellular energy production. Being studied for heart failure and mitochondrial diseases.', 
        defaultDose: '0.25mg/kg', frequency: 'Daily', halfLife: '~4 hours', 
        adminRoute: 'SubQ or IV', stacksWith: 'MOTS-c, CoQ10', cycleLength: '4-8 weeks' },
      
      { id: 85, name: 'MOTS-c', category: 'Anti-Aging', purpose: 'Metabolic/Exercise Mimetic', 
        uses: 'Mitochondrial peptide that mimics exercise benefits. Improves insulin sensitivity, metabolism, and physical performance. "Exercise in a bottle."', 
        defaultDose: '5-10mg', frequency: '3x weekly', halfLife: 'Unknown', 
        adminRoute: 'SubQ', stacksWith: 'SS-31, Exercise', cycleLength: '4-8 weeks' },
      
      // ═══════════════════════════════════════════════════════════════
      // COGNITIVE & NEUROPROTECTION
      // ═══════════════════════════════════════════════════════════════
      { id: 74, name: 'Semax', category: 'Cognitive', purpose: 'Nootropic/BDNF', 
        uses: 'Russian nootropic peptide. Increases BDNF, improves focus, memory, and mental clarity. Also has neuroprotective and anti-anxiety effects.', 
        defaultDose: '200-600mcg', frequency: 'Daily (nasal)', halfLife: 'Minutes (but lasting effects)', 
        adminRoute: 'Nasal spray', stacksWith: 'Selank, NA-Semax', cycleLength: '2-3 weeks on, 1 week off' },
      
      { id: 75, name: 'NA-Semax Amidate', category: 'Cognitive', purpose: 'Enhanced Nootropic', 
        uses: 'Modified Semax with longer duration and stronger effects. Better BDNF elevation. More potent cognitive enhancement than regular Semax.', 
        defaultDose: '200-600mcg', frequency: 'Daily (nasal)', halfLife: 'Longer than Semax', 
        adminRoute: 'Nasal spray', stacksWith: 'Selank, P21', cycleLength: '2-3 weeks on, 1 week off' },
      
      { id: 73, name: 'Selank', category: 'Cognitive', purpose: 'Anxiolytic/Nootropic', 
        uses: 'Russian peptide for anxiety and cognition. Modulates GABA, reduces anxiety without sedation. Also enhances learning and memory.', 
        defaultDose: '250-500mcg', frequency: 'Daily (nasal)', halfLife: 'Minutes', 
        adminRoute: 'Nasal spray', stacksWith: 'Semax', cycleLength: '2-3 weeks on, 1 week off' },
      
      { id: 76, name: 'Dihexa', category: 'Cognitive', purpose: 'Memory/Neurogenesis', 
        uses: 'Extremely potent nootropic (10 million times stronger than BDNF). Promotes synapse formation and memory. Used for cognitive decline and brain injuries.', 
        defaultDose: '10-20mg', frequency: 'Daily (oral or nasal)', halfLife: 'Unknown', 
        adminRoute: 'Oral, nasal, or SubQ', stacksWith: 'Semax', cycleLength: '2-4 weeks' },
      
      { id: 77, name: 'P21 (Cerebrolysin peptide)', category: 'Cognitive', purpose: 'Neurogenesis', 
        uses: 'Promotes neurogenesis and BDNF. Used for brain injury recovery, cognitive decline, and neurological conditions. Similar to Cerebrolysin.', 
        defaultDose: '1-2mg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or nasal', stacksWith: 'Semax, Dihexa', cycleLength: '4-8 weeks' },
      
      { id: 82, name: 'DSIP (Delta Sleep Inducing Peptide)', category: 'Cognitive', purpose: 'Sleep/Recovery', 
        uses: 'Improves sleep quality and architecture. Promotes deep, restorative sleep. Also has stress-reducing and pain-modulating effects.', 
        defaultDose: '100-300mcg', frequency: 'Before bed', halfLife: '15-25 minutes', 
        adminRoute: 'SubQ, IM, or nasal', stacksWith: 'Ipamorelin, Epithalon', cycleLength: '2-4 weeks' },
      
      { id: 33, name: 'Cortexin', category: 'Cognitive', purpose: 'Nootropic (Bioregulator)', 
        uses: 'Khavinson bioregulator for brain function. Improves cognition, memory, and brain recovery. Used in Russia for stroke and brain injuries.', 
        defaultDose: '10mg', frequency: 'Daily for 10 days', halfLife: 'Short', 
        adminRoute: 'IM', stacksWith: 'Pinealon, Cerluten', cycleLength: '10-day cycles' },
      
      { id: 46, name: 'Pinealon', category: 'Cognitive', purpose: 'Pineal/Brain (Bioregulator)', 
        uses: 'Short peptide for brain and pineal gland. Improves sleep, cognitive function, and melatonin regulation. Also has anti-aging effects.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Epithalon', cycleLength: '10-30 days' },
      
      { id: 49, name: 'Cerluten', category: 'Cognitive', purpose: 'Brain (Bioregulator)', 
        uses: 'Khavinson peptide for central nervous system. Supports brain function, cognition, and neurological health.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Pinealon, Cortexin', cycleLength: '10-30 days' },
      
      // ═══════════════════════════════════════════════════════════════
      // IMMUNE SYSTEM
      // ═══════════════════════════════════════════════════════════════
      { id: 79, name: 'Thymosin Alpha-1', category: 'Immune', purpose: 'Immune Modulation', 
        uses: 'Powerful immune modulator. Enhances T-cell function, used for chronic infections, cancer support, and immune deficiencies. FDA approved in some countries.', 
        defaultDose: '1.6mg', frequency: '2x weekly', halfLife: '2 hours', 
        adminRoute: 'SubQ', stacksWith: 'Thymulin, LL-37', cycleLength: '4-12 weeks' },
      
      { id: 78, name: 'LL-37', category: 'Immune', purpose: 'Antimicrobial', 
        uses: 'Human antimicrobial peptide. Fights bacteria, viruses, and fungi. Modulates immune response. Used for chronic infections and Lyme disease support.', 
        defaultDose: '50-100mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ', stacksWith: 'Thymosin Alpha-1', cycleLength: '4-8 weeks' },
      
      { id: 32, name: 'Thymalin', category: 'Immune', purpose: 'Thymus/Immune (Bioregulator)', 
        uses: 'Khavinson thymus peptide. Restores immune function, especially in aging. Increases T-cell production and activity.', 
        defaultDose: '10mg', frequency: 'Daily for 10 days', halfLife: 'Short', 
        adminRoute: 'IM or SubQ', stacksWith: 'Thymosin Alpha-1', cycleLength: '10-day cycles' },
      
      { id: 36, name: 'Thymulin', category: 'Immune', purpose: 'Thymus/Immune (Bioregulator)', 
        uses: 'Thymic hormone that modulates immune function. Helps restore T-cell populations. Anti-aging effects on immune system.', 
        defaultDose: '1-5mg', frequency: '10-day cycles', halfLife: 'Short', 
        adminRoute: 'SubQ', stacksWith: 'Thymalin, Zinc', cycleLength: '10-day cycles' },
      
      { id: 37, name: 'Vilon', category: 'Immune', purpose: 'Thymus (Bioregulator)', 
        uses: 'Short peptide for thymus and immune system. Supports T-cell function and overall immune health.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Thymalin', cycleLength: '10-30 days' },
      
      { id: 39, name: 'Crystagen', category: 'Immune', purpose: 'Immune (Bioregulator)', 
        uses: 'Khavinson peptide for immune system support. Enhances overall immune function and resistance to infection.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Vilon', cycleLength: '10-30 days' },
      
      // ═══════════════════════════════════════════════════════════════
      // SKIN, HAIR & TANNING
      // ═══════════════════════════════════════════════════════════════
      { id: 63, name: 'Melanotan II', category: 'Skin & Tanning', purpose: 'Tanning/Libido', 
        uses: 'Stimulates melanin production for tanning without sun. Also increases libido and may suppress appetite. Loading phase then maintenance.', 
        defaultDose: '0.25-1mg', frequency: 'Daily during loading, then as needed', halfLife: '33 minutes', 
        adminRoute: 'SubQ', stacksWith: 'Sun exposure', cycleLength: 'Loading 1-2 weeks, maintenance as needed' },
      
      { id: 64, name: 'Melanotan I (Afamelanotide)', category: 'Skin & Tanning', purpose: 'Tanning/Skin Protection', 
        uses: 'Tanning peptide without the libido effects of MT-II. FDA approved for EPP. Provides photoprotection and even tan.', 
        defaultDose: '1mg', frequency: 'Daily or as needed', halfLife: '30 minutes', 
        adminRoute: 'SubQ or implant', stacksWith: 'Sun exposure', cycleLength: 'As needed' },
      
      { id: 91, name: 'Copper Peptide AHK-Cu', category: 'Skin & Hair', purpose: 'Hair Growth', 
        uses: 'Promotes hair follicle growth and thickness. Applied topically for hair loss. Can be combined with microneedling for enhanced absorption.', 
        defaultDose: 'Topical', frequency: 'Daily (topical)', halfLife: 'N/A', 
        adminRoute: 'Topical or microneedling', stacksWith: 'GHK-Cu, Minoxidil', cycleLength: '3-6 months' },
      
      { id: 89, name: 'SNAP-8', category: 'Skin & Hair', purpose: 'Anti-Wrinkle', 
        uses: 'Topical peptide that relaxes facial muscles similar to Botox. Reduces expression lines and wrinkles. "Botox in a bottle."', 
        defaultDose: 'Topical 3-10%', frequency: 'Daily (topical)', halfLife: 'N/A', 
        adminRoute: 'Topical', stacksWith: 'Argireline, GHK-Cu', cycleLength: 'Ongoing' },
      
      { id: 90, name: 'Argireline', category: 'Skin & Hair', purpose: 'Anti-Wrinkle', 
        uses: 'Inhibits muscle contraction to reduce wrinkles. Popular in anti-aging skincare. Works best on expression lines.', 
        defaultDose: 'Topical 5-10%', frequency: 'Daily (topical)', halfLife: 'N/A', 
        adminRoute: 'Topical', stacksWith: 'SNAP-8, GHK-Cu', cycleLength: 'Ongoing' },
      
      // ═══════════════════════════════════════════════════════════════
      // SEXUAL HEALTH
      // ═══════════════════════════════════════════════════════════════
      { id: 62, name: 'PT-141 (Bremelanotide)', category: 'Sexual Health', purpose: 'Libido/Arousal', 
        uses: 'Increases sexual desire and arousal in both men and women. Works through CNS rather than vascular system. May cause nausea.', 
        defaultDose: '1-2mg', frequency: 'As needed (1-2 hours before)', halfLife: '2 hours', 
        adminRoute: 'SubQ', stacksWith: 'None typically', cycleLength: 'As needed' },
      
      { id: 27, name: 'Bremelanotide (Vyleesi)', category: 'Sexual Health', purpose: 'Female Libido (FDA)', 
        uses: 'FDA-approved for hypoactive sexual desire disorder in women. Same as PT-141. Works on brain pathways for arousal.', 
        defaultDose: '1.75mg', frequency: 'As needed', halfLife: '2 hours', 
        adminRoute: 'SubQ', stacksWith: 'None typically', cycleLength: 'As needed' },
      
      { id: 11, name: 'Gonadorelin', category: 'Sexual Health', purpose: 'Fertility/HRT', 
        uses: 'GnRH analog. Stimulates LH and FSH release. Used for fertility, maintaining testicular function during TRT, and hormone testing.', 
        defaultDose: '100mcg', frequency: '2-3x weekly', halfLife: '10-40 minutes', 
        adminRoute: 'SubQ', stacksWith: 'TRT, HCG alternative', cycleLength: 'Ongoing with TRT' },
      
      { id: 47, name: 'Testagen', category: 'Sexual Health', purpose: 'Testes (Bioregulator)', 
        uses: 'Khavinson peptide for testicular function. Supports testosterone production and testicular health.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'TRT support', cycleLength: '10-30 days' },
      
      // ═══════════════════════════════════════════════════════════════
      // MUSCLE GROWTH
      // ═══════════════════════════════════════════════════════════════
      { id: 69, name: 'IGF-1 LR3', category: 'Muscle Growth', purpose: 'Anabolic', 
        uses: 'Long-acting IGF-1. Promotes muscle growth and fat loss. More potent and longer lasting than regular IGF-1. Risk of hypoglycemia.', 
        defaultDose: '20-50mcg', frequency: 'Daily (post-workout)', halfLife: '20-30 hours', 
        adminRoute: 'SubQ or IM', stacksWith: 'GH, AAS', cycleLength: '4-6 weeks max' },
      
      { id: 70, name: 'IGF-1 DES', category: 'Muscle Growth', purpose: 'Localized Growth', 
        uses: 'Fast-acting IGF-1 for localized muscle growth. Injected directly into target muscle. Very potent but short-lived.', 
        defaultDose: '50-150mcg', frequency: 'Pre-workout into target muscle', halfLife: '20-30 minutes', 
        adminRoute: 'IM (into target muscle)', stacksWith: 'IGF-1 LR3', cycleLength: '4 weeks max' },
      
      { id: 71, name: 'MGF (Mechano Growth Factor)', category: 'Muscle Growth', purpose: 'Muscle Recovery', 
        uses: 'Splice variant of IGF-1. Activates muscle satellite cells for repair and growth. Best used immediately post-workout.', 
        defaultDose: '100-200mcg', frequency: 'Post-workout', halfLife: 'Minutes', 
        adminRoute: 'IM (into worked muscle)', stacksWith: 'PEG-MGF, IGF-1', cycleLength: '4-6 weeks' },
      
      { id: 72, name: 'PEG-MGF', category: 'Muscle Growth', purpose: 'Extended Muscle Growth', 
        uses: 'PEGylated MGF with longer half-life. Systemic muscle growth effects rather than localized. Good for overall recovery.', 
        defaultDose: '200mcg', frequency: '2-3x weekly', halfLife: 'Days', 
        adminRoute: 'SubQ or IM', stacksWith: 'MGF, GH peptides', cycleLength: '4-8 weeks' },
      
      { id: 67, name: 'Follistatin 344', category: 'Muscle Growth', purpose: 'Myostatin Inhibitor', 
        uses: 'Blocks myostatin to allow greater muscle growth. Significant muscle-building potential. Expensive and less studied.', 
        defaultDose: '100mcg', frequency: 'Daily', halfLife: 'Unknown', 
        adminRoute: 'SubQ', stacksWith: 'GH peptides', cycleLength: '10-30 days' },
      
      // ═══════════════════════════════════════════════════════════════
      // ORGAN-SPECIFIC BIOREGULATORS
      // ═══════════════════════════════════════════════════════════════
      { id: 40, name: 'Cardiogen', category: 'Organ Support', purpose: 'Heart (Bioregulator)', 
        uses: 'Khavinson peptide for heart health. Supports cardiac muscle function and recovery from heart conditions.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Vesugen', cycleLength: '10-30 days' },
      
      { id: 42, name: 'Vesugen', category: 'Organ Support', purpose: 'Blood Vessels (Bioregulator)', 
        uses: 'Supports blood vessel health and function. Improves circulation and vascular integrity.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Cardiogen', cycleLength: '10-30 days' },
      
      { id: 38, name: 'Livagen', category: 'Organ Support', purpose: 'Liver (Bioregulator)', 
        uses: 'Supports liver function and regeneration. Used for liver conditions and detoxification support.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Ovagen', cycleLength: '10-30 days' },
      
      { id: 44, name: 'Ovagen', category: 'Organ Support', purpose: 'Liver/GI (Bioregulator)', 
        uses: 'Supports liver and gastrointestinal tract function. Helps with digestion and liver health.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Livagen', cycleLength: '10-30 days' },
      
      { id: 41, name: 'Bronchogen', category: 'Organ Support', purpose: 'Lungs (Bioregulator)', 
        uses: 'Supports respiratory system and lung function. Used for respiratory conditions and lung health.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Chonluten', cycleLength: '10-30 days' },
      
      { id: 43, name: 'Chonluten', category: 'Organ Support', purpose: 'Lung Mucosa (Bioregulator)', 
        uses: 'Supports bronchial and lung mucosa health. Helps with respiratory conditions.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Bronchogen', cycleLength: '10-30 days' },
      
      { id: 45, name: 'Pancragen', category: 'Organ Support', purpose: 'Pancreas (Bioregulator)', 
        uses: 'Supports pancreatic function and blood sugar regulation. May help with metabolic conditions.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'Metformin', cycleLength: '10-30 days' },
      
      { id: 34, name: 'Retinalamin', category: 'Organ Support', purpose: 'Eyes (Bioregulator)', 
        uses: 'Supports retinal health and vision. Used for macular degeneration and other eye conditions.', 
        defaultDose: '5mg', frequency: 'Daily for 10 days', halfLife: 'Short', 
        adminRoute: 'IM or parabulbar', stacksWith: 'Lutein, Zeaxanthin', cycleLength: '10-day cycles' },
      
      { id: 35, name: 'Prostatilen', category: 'Organ Support', purpose: 'Prostate (Bioregulator)', 
        uses: 'Supports prostate health and function. Used for BPH and prostatitis.', 
        defaultDose: '5-10mg', frequency: 'Daily for 10 days', halfLife: 'Short', 
        adminRoute: 'IM or suppository', stacksWith: 'Testagen', cycleLength: '10-day cycles' },
      
      { id: 50, name: 'Sigumir', category: 'Organ Support', purpose: 'Joints/Cartilage (Bioregulator)', 
        uses: 'Supports cartilage and joint health. Used for osteoarthritis and joint repair.', 
        defaultDose: '10mcg', frequency: 'Daily', halfLife: 'Short', 
        adminRoute: 'SubQ or oral', stacksWith: 'BPC-157, Collagen', cycleLength: '10-30 days' },
      
      // ═══════════════════════════════════════════════════════════════
      // PEPTIDE BLENDS (Custom)
      // ═══════════════════════════════════════════════════════════════
      { id: 98, name: 'GLOW Blend', category: 'Peptide Blend', purpose: 'Healing/Skin/Recovery', 
        uses: 'Regenerative blend of GHK-Cu (50mg) + BPC-157 (10mg) + TB-500 (10mg). Promotes collagen synthesis, tissue repair, wound healing, skin rejuvenation, and anti-aging. GHK-Cu improves skin firmness and hair health; BPC-157 supports gut and tissue repair; TB-500 accelerates cellular regeneration. Best for recovery from injury, skin health, and anti-aging.', 
        defaultDose: '250-500mcg total', frequency: 'Daily', halfLife: 'Variable by component', 
        adminRoute: 'SubQ', stacksWith: 'Can be used alone or with GH peptides', cycleLength: '8-12 weeks on, 4 weeks off' },
      
      { id: 99, name: 'KLOW Blend', category: 'Peptide Blend', purpose: 'Healing/Anti-inflammatory', 
        uses: 'Advanced regenerative blend: GHK-Cu (50mg) + BPC-157 (10mg) + TB-500 (10mg) + KPV (10mg). Everything in GLOW plus KPV for powerful anti-inflammatory and immune modulation. KPV calms gut inflammation, skin conditions, and systemic inflammation. Ideal for autoimmune issues, gut healing, joint pain, and recovery. The "rebuild and resilience" blend.', 
        defaultDose: '500-1250mcg total', frequency: 'Daily (5 days/week)', halfLife: 'Variable by component', 
        adminRoute: 'SubQ', stacksWith: 'GLP-1 agonists, GH peptides', cycleLength: '12-16 weeks, cycle off periodically' },
      
      // ═══════════════════════════════════════════════════════════════
      // OTHER FDA-APPROVED (Medical Use)
      // ═══════════════════════════════════════════════════════════════
      { id: 4, name: 'Dulaglutide (Trulicity)', category: 'Diabetes (FDA)', purpose: 'GLP-1 Agonist', 
        uses: 'Weekly GLP-1 for Type 2 diabetes. Also provides cardiovascular benefits. Moderate weight loss.', 
        defaultDose: '0.75-4.5mg', frequency: 'Weekly', halfLife: '5 days', 
        adminRoute: 'SubQ', stacksWith: 'Metformin', cycleLength: 'Long-term' },
      
      { id: 6, name: 'Insulin Glargine (Lantus)', category: 'Diabetes (FDA)', purpose: 'Basal Insulin', 
        uses: 'Long-acting basal insulin for diabetes management. Provides steady insulin levels for 24 hours.', 
        defaultDose: 'Variable (per needs)', frequency: 'Daily', halfLife: '24 hours', 
        adminRoute: 'SubQ', stacksWith: 'Fast-acting insulin', cycleLength: 'Ongoing' },
      
      { id: 21, name: 'Glucagon', category: 'Diabetes (FDA)', purpose: 'Emergency Hypoglycemia', 
        uses: 'Emergency treatment for severe low blood sugar. Rapidly raises blood glucose. Essential for diabetics on insulin.', 
        defaultDose: '1mg', frequency: 'Emergency only', halfLife: '8-18 minutes', 
        adminRoute: 'IM, SubQ, or nasal', stacksWith: 'N/A', cycleLength: 'Emergency use' },
      
      { id: 13, name: 'Octreotide (Sandostatin)', category: 'Hormone (FDA)', purpose: 'Somatostatin Analog', 
        uses: 'Suppresses growth hormone and other hormones. Used for acromegaly, carcinoid tumors, and bleeding varices.', 
        defaultDose: '50-200mcg', frequency: '2-4x daily', halfLife: '1.5 hours', 
        adminRoute: 'SubQ or IV', stacksWith: 'N/A', cycleLength: 'As prescribed' },
      
      { id: 20, name: 'Oxytocin', category: 'Hormone (FDA)', purpose: 'Bonding/Labor', 
        uses: 'The "love hormone." Medical use for labor induction. Also studied for social bonding, trust, and anxiety.', 
        defaultDose: 'Variable', frequency: 'As needed', halfLife: '3-5 minutes', 
        adminRoute: 'IV, IM, or nasal', stacksWith: 'N/A', cycleLength: 'As needed' }
    ];
    
    // Your pre-loaded schedule
    const INITIAL_SCHEDULES = [
      { id: '1', name: 'TB-500', dosage: '500 mcg', frequency: 'twice/day', daysPerWeek: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'], timeOfDay: 'anytime', startDate: '2025-11-26', endDate: '2026-02-18', cycleWeeks: 12, notes: '' },
      { id: '2', name: 'BPC-157', dosage: '500 mcg', frequency: 'twice/day', daysPerWeek: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'], timeOfDay: 'anytime', startDate: '2025-11-26', endDate: '2026-02-18', cycleWeeks: 12, notes: '' },
      { id: '3', name: 'Tesamorelin', dosage: '500 mcg', frequency: 'once/day', daysPerWeek: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'], timeOfDay: 'evening', startDate: '2025-11-26', endDate: null, cycleWeeks: 8, notes: '5 nights/week' },
      { id: '4', name: 'Tirzepatide', dosage: '5 mg', frequency: 'once/week', daysPerWeek: ['Mon'], timeOfDay: 'morning', startDate: '2025-12-02', endDate: null, cycleWeeks: null, notes: '' },
      { id: '5', name: 'Testosterone Cypionate', dosage: '2 mg', frequency: 'twice/week', daysPerWeek: ['Mon', 'Thu'], timeOfDay: 'morning', startDate: null, endDate: null, cycleWeeks: 16, notes: 'TRT - Ongoing' },
      { id: '6', name: 'HCG', dosage: '500 IU', frequency: 'twice/week', daysPerWeek: ['Mon', 'Thu'], timeOfDay: 'morning', startDate: null, endDate: null, cycleWeeks: null, notes: 'Same days as TRT' },
      { id: '7', name: 'Glutathione', dosage: '600 mg', frequency: 'over 3 days', daysPerWeek: ['Mon', 'Wed', 'Fri'], timeOfDay: 'anytime', startDate: '2025-12-03', endDate: null, cycleWeeks: 12, notes: '3 days/week' },
      { id: '8', name: 'KLOW Blend', dosage: '1250 µg', frequency: 'once/day', daysPerWeek: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'], timeOfDay: 'anytime', startDate: '2025-12-03', endDate: null, cycleWeeks: 16, notes: '5 days/week' }
    ];
    
    // Icons
    const Icons = {
      Calendar: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
      Check: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      Plus: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
      Home: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
      List: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>,
      Clock: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Settings: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1.08-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1.08 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>,
      Database: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>,
      ChevronLeft: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="15 18 9 12 15 6"/></svg>,
      ChevronRight: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="9 18 15 12 9 6"/></svg>,
      Download: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>,
      Upload: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>,
      Search: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>,
      Calculator: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="10" x2="8" y2="10.01"/><line x1="12" y1="10" x2="12" y2="10.01"/><line x1="16" y1="10" x2="16" y2="10.01"/><line x1="8" y1="14" x2="8" y2="14.01"/><line x1="12" y1="14" x2="12" y2="14.01"/><line x1="16" y1="14" x2="16" y2="14.01"/><line x1="8" y1="18" x2="8" y2="18.01"/><line x1="12" y1="18" x2="12" y2="18.01"/><line x1="16" y1="18" x2="16" y2="18.01"/></svg>,
      Box: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>,
      Minus: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/></svg>
    };
    
    // PIN Screen
    function PinScreen({ onUnlock }) {
      const [pin, setPin] = useState('');
      const [error, setError] = useState(false);
      
      const handleKeyPress = (key) => {
        if (error) setError(false);
        if (key === 'delete') {
          setPin(prev => prev.slice(0, -1));
        } else if (pin.length < 4) {
          const newPin = pin + key;
          setPin(newPin);
          if (newPin.length === 4) {
            if (newPin === CORRECT_PIN) {
              setTimeout(() => onUnlock(), 200);
            } else {
              setError(true);
              setTimeout(() => { setPin(''); setError(false); }, 600);
            }
          }
        }
      };
      
      return (
        <div className="pin-container">
          <div className="pin-logo">💉</div>
          <h1 className="pin-title">Shot Tracker</h1>
          <p className="pin-subtitle">Enter your PIN to unlock</p>
          <div className="pin-dots">
            {[0,1,2,3].map(i => <div key={i} className={`pin-dot ${pin.length > i ? 'filled' : ''} ${error ? 'error' : ''}`}/>)}
          </div>
          <div className="pin-keypad">
            {[1,2,3,4,5,6,7,8,9,'',0,'⌫'].map((key, i) => (
              <button key={i} className={`pin-key ${key === '' ? 'empty' : ''}`} onClick={() => key !== '' && handleKeyPress(key === '⌫' ? 'delete' : key.toString())}>{key}</button>
            ))}
          </div>
        </div>
      );
    }
    
    // Main App
    function App() {
      const [isUnlocked, setIsUnlocked] = useState(false);
      const [activeTab, setActiveTab] = useState('today');
      const [selectedDate, setSelectedDate] = useState(new Date());
      const [schedules, setSchedules] = useState([]);
      const [logs, setLogs] = useState({});
      const [inventory, setInventory] = useState([]);
      const [showModal, setShowModal] = useState(false);
      const [showInventoryModal, setShowInventoryModal] = useState(false);
      const [editingSchedule, setEditingSchedule] = useState(null);
      const [editingVial, setEditingVial] = useState(null);
      const [dbSearch, setDbSearch] = useState('');
      const [dbFilter, setDbFilter] = useState('All');
      const [purposeFilter, setPurposeFilter] = useState('All');
      const [dataLoaded, setDataLoaded] = useState(false);
      
      const lockApp = () => { setIsUnlocked(false); sessionStorage.removeItem('peptide-unlocked'); };
      
      // Load data on mount - only runs once
      useEffect(() => {
        try {
          const saved = localStorage.getItem('peptide-schedules');
          const savedLogs = localStorage.getItem('peptide-logs');
          const savedInventory = localStorage.getItem('peptide-inventory');
          const savedUnlock = sessionStorage.getItem('peptide-unlocked');
          
          if (saved) {
            const parsed = JSON.parse(saved);
            if (Array.isArray(parsed) && parsed.length > 0) {
              setSchedules(parsed);
            } else {
              setSchedules(INITIAL_SCHEDULES);
            }
          } else {
            setSchedules(INITIAL_SCHEDULES);
          }
          
          if (savedLogs) {
            const parsedLogs = JSON.parse(savedLogs);
            if (parsedLogs && typeof parsedLogs === 'object') {
              setLogs(parsedLogs);
            }
          }
          
          if (savedInventory) {
            const parsedInventory = JSON.parse(savedInventory);
            if (Array.isArray(parsedInventory)) {
              setInventory(parsedInventory);
            }
          }
          
          if (savedUnlock === 'true') setIsUnlocked(true);
          
          // Mark data as loaded AFTER setting state
          setTimeout(() => setDataLoaded(true), 100);
        } catch (e) {
          console.error('Error loading data:', e);
          setSchedules(INITIAL_SCHEDULES);
          setDataLoaded(true);
        }
      }, []);
      
      // Save schedules - only after initial load
      useEffect(() => {
        if (dataLoaded && schedules.length > 0) {
          try {
            localStorage.setItem('peptide-schedules', JSON.stringify(schedules));
            console.log('Schedules saved:', schedules.length);
          } catch (e) {
            console.error('Error saving schedules:', e);
          }
        }
      }, [schedules, dataLoaded]);
      
      // Save logs - only after initial load  
      useEffect(() => {
        if (dataLoaded) {
          try {
            localStorage.setItem('peptide-logs', JSON.stringify(logs));
            console.log('Logs saved:', Object.keys(logs).length);
          } catch (e) {
            console.error('Error saving logs:', e);
          }
        }
      }, [logs, dataLoaded]);
      
      // Save inventory - only after initial load
      useEffect(() => {
        if (dataLoaded) {
          try {
            localStorage.setItem('peptide-inventory', JSON.stringify(inventory));
            console.log('Inventory saved:', inventory.length);
          } catch (e) {
            console.error('Error saving inventory:', e);
          }
        }
      }, [inventory, dataLoaded]);
      
      const handleUnlock = () => { setIsUnlocked(true); sessionStorage.setItem('peptide-unlocked', 'true'); };
      
      const formatDate = (date) => date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' });
      const getDateKey = (date) => date.toISOString().split('T')[0];
      const getDayName = (date) => date.toLocaleDateString('en-US', { weekday: 'short' });
      
      const getSchedulesForDate = (date) => {
        const dayName = getDayName(date);
        const dateStr = getDateKey(date);
        return schedules.filter(s => {
          if (!s.daysPerWeek.includes(dayName)) return false;
          if (s.startDate && dateStr < s.startDate) return false;
          if (s.endDate && dateStr > s.endDate) return false;
          return true;
        });
      };
      
      const logDose = (scheduleId, status) => {
        const logKey = `${getDateKey(selectedDate)}-${scheduleId}`;
        setLogs(prev => ({ ...prev, [logKey]: { status, timestamp: new Date().toISOString() } }));
        
        // Deduct from inventory if taken
        if (status === 'taken') {
          const schedule = schedules.find(s => s.id === scheduleId);
          if (schedule) {
            const vial = inventory.find(v => v.name.toLowerCase() === schedule.name.toLowerCase() && v.remaining > 0);
            if (vial) {
              const doseAmount = parseFloat(schedule.dosage) || 0;
              setInventory(prev => prev.map(v => 
                v.id === vial.id ? { ...v, remaining: Math.max(0, v.remaining - doseAmount), lastUsed: new Date().toISOString() } : v
              ));
            }
          }
        }
      };
      
      const getLogStatus = (scheduleId) => logs[`${getDateKey(selectedDate)}-${scheduleId}`];
      
      const getCycleProgress = (schedule) => {
        if (!schedule.startDate || !schedule.cycleWeeks) return null;
        const daysDiff = Math.floor((selectedDate - new Date(schedule.startDate)) / (1000 * 60 * 60 * 24));
        const weeksDiff = Math.floor(daysDiff / 7) + 1;
        return { currentWeek: Math.min(weeksDiff, schedule.cycleWeeks), totalWeeks: schedule.cycleWeeks, progress: Math.min((weeksDiff / schedule.cycleWeeks) * 100, 100) };
      };
      
      const getCalendarDays = () => {
        const days = [];
        const startOfWeek = new Date(selectedDate);
        startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay());
        for (let i = 0; i < 14; i++) {
          const date = new Date(startOfWeek);
          date.setDate(date.getDate() + i);
          days.push({ date, dayName: date.toLocaleDateString('en-US', { weekday: 'short' }), dayNum: date.getDate(), isSelected: getDateKey(date) === getDateKey(selectedDate), isToday: getDateKey(date) === getDateKey(new Date()), scheduleCount: getSchedulesForDate(date).length });
        }
        return days;
      };
      
      const saveSchedule = (data) => {
        if (editingSchedule) setSchedules(prev => prev.map(s => s.id === editingSchedule.id ? { ...data, id: s.id } : s));
        else setSchedules(prev => [...prev, { ...data, id: Date.now().toString() }]);
        setShowModal(false);
        setEditingSchedule(null);
      };
      
      const deleteSchedule = (id) => { setSchedules(prev => prev.filter(s => s.id !== id)); setShowModal(false); setEditingSchedule(null); };
      
      const saveVial = (vial) => {
        if (editingVial) setInventory(prev => prev.map(v => v.id === editingVial.id ? { ...vial, id: v.id } : v));
        else setInventory(prev => [...prev, { ...vial, id: Date.now().toString(), dateAdded: new Date().toISOString() }]);
        setShowInventoryModal(false);
        setEditingVial(null);
      };
      
      const deleteVial = (id) => { setInventory(prev => prev.filter(v => v.id !== id)); setShowInventoryModal(false); setEditingVial(null); };
      
      const getVialStatus = (vial) => {
        const percent = (vial.remaining / vial.totalAmount) * 100;
        if (percent <= 10) return 'low';
        if (percent <= 30) return 'medium';
        return 'high';
      };
      
      const exportData = () => {
        const blob = new Blob([JSON.stringify({ schedules, logs, inventory }, null, 2)], { type: 'application/json' });
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `peptide-backup-${getDateKey(new Date())}.json`; a.click();
      };
      
      const importData = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (ev) => {
            try {
              const data = JSON.parse(ev.target.result);
              if (data.schedules) setSchedules(data.schedules);
              if (data.logs) setLogs(data.logs);
              if (data.inventory) setInventory(data.inventory);
              alert('Data imported!');
            } catch { alert('Error importing'); }
          };
          reader.readAsText(file);
        }
      };
      
      const PURPOSE_CATEGORIES = ['All', 'Healing & Recovery', 'Weight Loss', 'Growth Hormone', 'Anti-Aging', 'Cognitive', 'Immune', 'Skin & Tanning', 'Skin & Hair', 'Sexual Health', 'Muscle Growth', 'Organ Support', 'Peptide Blend', 'Diabetes (FDA)', 'Hormone (FDA)'];
      
      const filteredPeptides = useMemo(() => {
        return PEPTIDE_DATABASE.filter(p => {
          const matchesSearch = p.name.toLowerCase().includes(dbSearch.toLowerCase()) || p.uses.toLowerCase().includes(dbSearch.toLowerCase());
          const matchesCategory = purposeFilter === 'All' || p.category === purposeFilter;
          return matchesSearch && matchesCategory;
        });
      }, [dbSearch, purposeFilter]);
      
      const addFromDatabase = (peptide) => {
        setEditingSchedule(null);
        setShowModal(true);
        setTimeout(() => {
          const event = new CustomEvent('prefillPeptide', { detail: peptide });
          window.dispatchEvent(event);
        }, 100);
      };
      
      if (!isUnlocked) return <PinScreen onUnlock={handleUnlock} />;
      
      const todaySchedules = getSchedulesForDate(selectedDate);
      const todayStats = { total: todaySchedules.length, taken: todaySchedules.filter(s => getLogStatus(s.id)?.status === 'taken').length, skipped: todaySchedules.filter(s => getLogStatus(s.id)?.status === 'skipped').length };
      const lowStockVials = inventory.filter(v => (v.remaining / v.totalAmount) <= 0.2);
      
      return (
        <div className="app-container">
          <header className="header">
            <div className="header-top">
              <div>
                <h1 className="header-title">Shot Tracker</h1>
                <p className="header-date">{formatDate(selectedDate)}</p>
              </div>
              <div className="header-actions">
                <button className="icon-btn" onClick={exportData} title="Export"><Icons.Download /></button>
                <button className="icon-btn" onClick={lockApp} title="Lock" style={{ background: 'rgba(239, 68, 68, 0.15)', borderColor: 'rgba(239, 68, 68, 0.3)', color: 'var(--accent-red)' }}><Icons.Lock /></button>
              </div>
            </div>
          </header>
          
          <nav className="tab-nav">
            {['today', 'schedules', 'database', 'history', 'settings'].map(tab => (
              <button key={tab} className={`tab-btn ${activeTab === tab ? 'active' : ''}`} onClick={() => setActiveTab(tab)}>
                {tab.charAt(0).toUpperCase() + tab.slice(1)}
              </button>
            ))}
          </nav>
          
          {(activeTab === 'today' || activeTab === 'history') && (
            <div className="calendar-strip">
              <div className="calendar-header">
                <span className="calendar-month">{selectedDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</span>
                <div className="calendar-nav">
                  <button className="calendar-nav-btn" onClick={() => { const d = new Date(selectedDate); d.setDate(d.getDate() - 7); setSelectedDate(d); }}><Icons.ChevronLeft /></button>
                  <button className="calendar-nav-btn" onClick={() => setSelectedDate(new Date())}>Today</button>
                  <button className="calendar-nav-btn" onClick={() => { const d = new Date(selectedDate); d.setDate(d.getDate() + 7); setSelectedDate(d); }}><Icons.ChevronRight /></button>
                </div>
              </div>
              <div className="calendar-days">
                {getCalendarDays().map((day, i) => (
                  <div key={i} className={`calendar-day ${day.isSelected ? 'selected' : ''} ${day.isToday ? 'today' : ''}`} onClick={() => setSelectedDate(day.date)}>
                    <div className="calendar-day-name">{day.dayName}</div>
                    <div className="calendar-day-num">{day.dayNum}</div>
                    <div className="calendar-day-dots">{Array.from({ length: Math.min(day.scheduleCount, 3) }).map((_, j) => <div key={j} className="calendar-day-dot" />)}</div>
                  </div>
                ))}
              </div>
            </div>
          )}
          
          <main className="content">
            {activeTab === 'today' && (
              <>
                <div className="stats-grid">
                  <div className="stat-card"><div className="stat-value">{todayStats.taken}/{todayStats.total}</div><div className="stat-label">Taken Today</div></div>
                  <div className="stat-card"><div className="stat-value" style={{ color: todayStats.total - todayStats.taken - todayStats.skipped > 0 ? 'var(--accent-orange)' : 'var(--accent-green)' }}>{todayStats.total - todayStats.taken - todayStats.skipped}</div><div className="stat-label">Remaining</div></div>
                </div>
                <div className="section-header"><h2 className="section-title">Today's Schedule</h2><span className="section-count">{todaySchedules.length} doses</span></div>
                {todaySchedules.length === 0 ? (
                  <div className="empty-state"><div className="empty-state-icon">📅</div><h3 className="empty-state-title">No doses scheduled</h3><p className="empty-state-text">Nothing scheduled for this day</p></div>
                ) : todaySchedules.map(schedule => {
                  const logStatus = getLogStatus(schedule.id);
                  const cycleProgress = getCycleProgress(schedule);
                  return (
                    <div key={schedule.id} className="schedule-card">
                      <div className="schedule-card-header">
                        <div className="schedule-card-info"><h3 className="schedule-card-name">{schedule.name}</h3><p className="schedule-card-dose">{schedule.dosage} • {schedule.frequency}</p></div>
                        <span className={`schedule-card-badge badge-${schedule.timeOfDay}`}>{schedule.timeOfDay}</span>
                      </div>
                      {logStatus && <div className={`status-indicator status-${logStatus.status}`}>{logStatus.status === 'taken' ? <Icons.Check /> : <Icons.X />} {logStatus.status === 'taken' ? 'Taken' : 'Skipped'} at {new Date(logStatus.timestamp).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}</div>}
                      {!logStatus && <div className="schedule-card-actions"><button className="action-btn" onClick={() => logDose(schedule.id, 'taken')}><Icons.Check /> Taken</button><button className="action-btn" onClick={() => logDose(schedule.id, 'skipped')}><Icons.X /> Skip</button></div>}
                      {cycleProgress && <div className="cycle-progress"><div className="cycle-label"><span>Cycle Progress</span><span>Week {cycleProgress.currentWeek} of {cycleProgress.totalWeeks}</span></div><div className="cycle-bar"><div className="cycle-fill" style={{ width: `${cycleProgress.progress}%` }} /></div></div>}
                      {schedule.notes && <p className="schedule-notes">📝 {schedule.notes}</p>}
                    </div>
                  );
                })}
              </>
            )}
            
            {activeTab === 'schedules' && (
              <>
                <button className="add-schedule-btn" onClick={() => { setEditingSchedule(null); setShowModal(true); }}><Icons.Plus /> Add New Schedule</button>
                <div className="section-header"><h2 className="section-title">All Schedules</h2><span className="section-count">{schedules.length} total</span></div>
                {schedules.map(schedule => {
                  const cycleProgress = getCycleProgress(schedule);
                  return (
                    <div key={schedule.id} className="schedule-card" onClick={() => { setEditingSchedule(schedule); setShowModal(true); }} style={{ cursor: 'pointer' }}>
                      <div className="schedule-card-header"><div className="schedule-card-info"><h3 className="schedule-card-name">{schedule.name}</h3><p className="schedule-card-dose">{schedule.dosage} • {schedule.frequency}</p></div><span className={`schedule-card-badge badge-${schedule.timeOfDay}`}>{schedule.timeOfDay}</span></div>
                      <div className="schedule-card-details"><span className="schedule-detail"><Icons.Calendar />{schedule.daysPerWeek.join(', ')}</span>{schedule.startDate && <span className="schedule-detail"><Icons.Clock />Started {schedule.startDate}</span>}</div>
                      {cycleProgress && <div className="cycle-progress"><div className="cycle-label"><span>Cycle</span><span>Week {cycleProgress.currentWeek}/{cycleProgress.totalWeeks}</span></div><div className="cycle-bar"><div className="cycle-fill" style={{ width: `${cycleProgress.progress}%` }} /></div></div>}
                      {schedule.notes && <p className="schedule-notes">📝 {schedule.notes}</p>}
                    </div>
                  );
                })}
              </>
            )}
            
            {activeTab === 'database' && (
              <>
                <div className="search-container"><input type="text" className="search-input" placeholder="Search peptides by name or use..." value={dbSearch} onChange={e => setDbSearch(e.target.value)} /></div>
                <div className="filter-tabs" style={{ flexWrap: 'wrap' }}>
                  {PURPOSE_CATEGORIES.slice(0, 8).map(f => (
                    <button key={f} className={`filter-tab ${purposeFilter === f ? 'active' : ''}`} onClick={() => setPurposeFilter(f)} style={{ fontSize: '10px', padding: '5px 8px' }}>{f}</button>
                  ))}
                </div>
                <div className="filter-tabs" style={{ marginTop: '-8px', flexWrap: 'wrap' }}>
                  {PURPOSE_CATEGORIES.slice(8).map(f => (
                    <button key={f} className={`filter-tab ${purposeFilter === f ? 'active' : ''}`} onClick={() => setPurposeFilter(f)} style={{ fontSize: '10px', padding: '5px 8px' }}>{f}</button>
                  ))}
                </div>
                <div className="section-header"><h2 className="section-title">Peptide Database</h2><span className="section-count">{filteredPeptides.length} shown</span></div>
                {filteredPeptides.map(peptide => (
                  <div key={peptide.id} className="peptide-list-item" onClick={() => addFromDatabase(peptide)}>
                    <div className="peptide-list-info">
                      <h4>{peptide.name}<span className={`purpose-badge`} style={{ background: 'rgba(34, 211, 238, 0.15)', color: 'var(--accent-cyan)' }}>{peptide.purpose}</span></h4>
                      <p style={{ lineHeight: '1.4' }}>{peptide.uses}</p>
                      <p style={{ color: 'var(--accent-cyan)', fontFamily: 'JetBrains Mono', fontSize: '11px', marginTop: '6px' }}>
                        💉 {peptide.defaultDose} • ⏱️ {peptide.frequency}
                        {peptide.halfLife && <span style={{ color: 'var(--text-muted)' }}> • t½: {peptide.halfLife}</span>}
                      </p>
                      {peptide.stacksWith && <p style={{ fontSize: '10px', color: 'var(--accent-purple)', marginTop: '4px' }}>Stacks with: {peptide.stacksWith}</p>}
                    </div>
                    <span style={{ fontSize: '10px', padding: '4px 8px', background: 'rgba(139, 92, 246, 0.15)', color: 'var(--accent-purple)', borderRadius: '6px', whiteSpace: 'nowrap' }}>{peptide.category.split(' ')[0]}</span>
                  </div>
                ))}
              </>
            )}
            
            {activeTab === 'history' && (
              <>
                <div className="section-header"><h2 className="section-title">Dose History</h2><span className="section-count">{getDateKey(selectedDate)}</span></div>
                {Object.entries(logs).filter(([key]) => key.startsWith(getDateKey(selectedDate))).map(([key, log]) => {
                  const scheduleId = key.split('-').slice(3).join('-');
                  const schedule = schedules.find(s => s.id === scheduleId);
                  if (!schedule) return null;
                  return (
                    <div key={key} className="history-item">
                      <div className={`history-status ${log.status}`} />
                      <div className="history-info"><div className="history-name">{schedule.name}</div><div className="history-time">{new Date(log.timestamp).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}</div></div>
                      <div className="history-dose">{schedule.dosage}</div>
                    </div>
                  );
                })}
                {Object.entries(logs).filter(([key]) => key.startsWith(getDateKey(selectedDate))).length === 0 && <div className="empty-state"><div className="empty-state-icon">📋</div><h3 className="empty-state-title">No logs for this date</h3></div>}
              </>
            )}
            
            {activeTab === 'inventory' && (
              <>
                <button className="add-btn" onClick={() => { setEditingVial(null); setShowInventoryModal(true); }}><Icons.Plus /> Add Vial</button>
                <div className="section-header"><h2 className="section-title">My Inventory</h2><span className="section-count">{inventory.length} vials</span></div>
                {inventory.length === 0 && (
                  <div className="empty-state">
                    <div className="empty-state-icon">📦</div>
                    <h3 className="empty-state-title">No vials tracked</h3>
                    <p className="empty-state-text">Add a vial to track your peptide inventory</p>
                  </div>
                )}
                {inventory.map(vial => {
                  const remainingPercent = vial.totalMg > 0 ? (vial.remainingMg / vial.totalMg) * 100 : 0;
                  const statusClass = remainingPercent > 50 ? 'high' : remainingPercent > 20 ? 'medium' : 'low';
                  const badgeClass = remainingPercent > 50 ? 'ok' : remainingPercent > 0 ? 'low' : 'empty';
                  return (
                    <div key={vial.id} className="inventory-card" onClick={() => { setEditingVial(vial); setShowInventoryModal(true); }}>
                      <div className="inventory-header">
                        <div>
                          <div className="inventory-name">{vial.name}</div>
                          <div className="inventory-meta">Added {new Date(vial.dateAdded).toLocaleDateString()}</div>
                        </div>
                        <span className={`inventory-badge ${badgeClass}`}>{remainingPercent > 0 ? `${Math.round(remainingPercent)}% left` : 'Empty'}</span>
                      </div>
                      <div className="inventory-stats">
                        <div className="inventory-stat"><div className="inventory-stat-value">{vial.totalMg}mg</div><div className="inventory-stat-label">Total</div></div>
                        <div className="inventory-stat"><div className="inventory-stat-value">{vial.remainingMg?.toFixed(1) || vial.totalMg}mg</div><div className="inventory-stat-label">Remaining</div></div>
                        <div className="inventory-stat"><div className="inventory-stat-value">{vial.waterMl || '-'}mL</div><div className="inventory-stat-label">Water</div></div>
                      </div>
                      <div className="inventory-progress"><div className={`inventory-progress-fill ${statusClass}`} style={{ width: `${remainingPercent}%` }} /></div>
                    </div>
                  );
                })}
              </>
            )}
            
            {activeTab === 'settings' && (
              <>
                <div className="settings-section">
                  <h3 className="settings-title">Data Management</h3>
                  <div className="settings-item" onClick={() => {
                    try {
                      localStorage.setItem('peptide-schedules', JSON.stringify(schedules));
                      localStorage.setItem('peptide-logs', JSON.stringify(logs));
                      localStorage.setItem('peptide-inventory', JSON.stringify(inventory));
                      alert('Data saved successfully! Schedules: ' + schedules.length + ', Logs: ' + Object.keys(logs).length + ', Inventory: ' + inventory.length);
                    } catch (e) {
                      alert('Error saving: ' + e.message);
                    }
                  }}><span className="settings-item-label">💾 Force Save Now</span><span className="settings-item-value">Tap to save</span></div>
                  <div className="settings-item" onClick={exportData}><span className="settings-item-label">Export Data</span><Icons.Download /></div>
                  <label className="settings-item"><span className="settings-item-label">Import Data</span><input type="file" accept=".json" onChange={importData} style={{ display: 'none' }} /><Icons.Upload /></label>
                  <div className="settings-item" onClick={() => {
                    if (confirm('This will reset ALL data to defaults. Your logs and inventory will be lost. Continue?')) {
                      localStorage.removeItem('peptide-schedules');
                      localStorage.removeItem('peptide-logs');
                      localStorage.removeItem('peptide-inventory');
                      setSchedules(INITIAL_SCHEDULES);
                      setLogs({});
                      setInventory([]);
                      alert('Data reset to defaults');
                    }
                  }} style={{ borderColor: 'var(--accent-red)' }}><span className="settings-item-label" style={{ color: 'var(--accent-red)' }}>⚠️ Reset All Data</span></div>
                </div>
                <div className="settings-section">
                  <h3 className="settings-title">Storage Status</h3>
                  <div className="settings-item"><span className="settings-item-label">Data Loaded</span><span className="settings-item-value" style={{ color: dataLoaded ? 'var(--accent-green)' : 'var(--accent-orange)' }}>{dataLoaded ? '✓ Yes' : 'Loading...'}</span></div>
                  <div className="settings-item"><span className="settings-item-label">Schedules in Storage</span><span className="settings-item-value">{(() => { try { const s = localStorage.getItem('peptide-schedules'); return s ? JSON.parse(s).length : 0; } catch { return 'Error'; } })()}</span></div>
                  <div className="settings-item"><span className="settings-item-label">Logs in Storage</span><span className="settings-item-value">{(() => { try { const l = localStorage.getItem('peptide-logs'); return l ? Object.keys(JSON.parse(l)).length : 0; } catch { return 'Error'; } })()}</span></div>
                  <div className="settings-item"><span className="settings-item-label">Inventory in Storage</span><span className="settings-item-value">{(() => { try { const i = localStorage.getItem('peptide-inventory'); return i ? JSON.parse(i).length : 0; } catch { return 'Error'; } })()}</span></div>
                </div>
                <div className="settings-section">
                  <h3 className="settings-title">App Info</h3>
                  <div className="settings-item"><span className="settings-item-label">Version</span><span className="settings-item-value">2.4.0</span></div>
                  <div className="settings-item"><span className="settings-item-label">Your Schedules</span><span className="settings-item-value">{schedules.length}</span></div>
                  <div className="settings-item"><span className="settings-item-label">Your Inventory</span><span className="settings-item-value">{inventory.length} vials</span></div>
                  <div className="settings-item"><span className="settings-item-label">Database Size</span><span className="settings-item-value">{PEPTIDE_DATABASE.length} items</span></div>
                  <div className="settings-item"><span className="settings-item-label">Total Logs</span><span className="settings-item-value">{Object.keys(logs).length}</span></div>
                </div>
                <div className="settings-section">
                  <h3 className="settings-title">🏪 Top Peptide Vendors (2025)</h3>
                  <p style={{ fontSize: '11px', color: 'var(--text-muted)', marginBottom: '12px' }}>Research-only. Always verify COAs and third-party testing.</p>
                  <div className="settings-item"><span className="settings-item-label">1. Peptide Sciences</span><span className="settings-item-value" style={{ fontSize: '10px' }}>peptidesciences.com</span></div>
                  <div className="settings-item"><span className="settings-item-label">2. Swiss Chems</span><span className="settings-item-value" style={{ fontSize: '10px' }}>swisschems.is</span></div>
                  <div className="settings-item"><span className="settings-item-label">3. Amino Asylum</span><span className="settings-item-value" style={{ fontSize: '10px' }}>aminoasylum.shop</span></div>
                  <div className="settings-item"><span className="settings-item-label">4. Core Peptides</span><span className="settings-item-value" style={{ fontSize: '10px' }}>corepeptides.com</span></div>
                  <div className="settings-item"><span className="settings-item-label">5. Limitless Life</span><span className="settings-item-value" style={{ fontSize: '10px' }}>limitlesslifenootropics.com</span></div>
                  <div className="settings-item"><span className="settings-item-label">6. Pure Rawz</span><span className="settings-item-value" style={{ fontSize: '10px' }}>purerawz.co</span></div>
                  <div className="settings-item"><span className="settings-item-label">7. Xcel Peptides</span><span className="settings-item-value" style={{ fontSize: '10px' }}>xcelpeptides.com</span></div>
                  <div className="settings-item"><span className="settings-item-label">8. BioTech Peptides</span><span className="settings-item-value" style={{ fontSize: '10px' }}>biotechpeptides.com</span></div>
                  <div className="settings-item"><span className="settings-item-label">9. Paradigm Peptides</span><span className="settings-item-value" style={{ fontSize: '10px' }}>paradigmpeptides.com</span></div>
                  <div className="settings-item"><span className="settings-item-label">10. CanLab Sciences</span><span className="settings-item-value" style={{ fontSize: '10px' }}>canlabsciences.com</span></div>
                  <p style={{ fontSize: '10px', color: 'var(--text-muted)', marginTop: '12px' }}>Check finnrick.com/vendors for independent lab testing results.</p>
                </div>
              </>
            )}
            
            {activeTab === 'inventory' && (
              <>
                <button className="add-schedule-btn" onClick={() => { setEditingVial(null); setShowInventoryModal(true); }}><Icons.Plus /> Add Vial</button>
                <div className="section-header"><h2 className="section-title">Inventory</h2><span className="section-count">{inventory.length} vials</span></div>
                {inventory.length === 0 && <div className="empty-state"><div className="empty-state-icon">📦</div><h3 className="empty-state-title">No vials tracked</h3><p className="empty-state-text">Add vials to track your inventory</p></div>}
                {inventory.map(vial => {
                  const percentRemaining = vial.totalMg > 0 ? (vial.remaining / vial.totalMg) * 100 : 0;
                  const status = percentRemaining <= 0 ? 'empty' : percentRemaining < 20 ? 'low' : 'ok';
                  return (
                    <div key={vial.id} className="inventory-card">
                      <div className="inventory-header">
                        <div>
                          <div className="inventory-name">{vial.name}</div>
                          <div className="inventory-meta">Added {new Date(vial.dateAdded).toLocaleDateString()}</div>
                        </div>
                        <span className={`inventory-badge ${status}`}>{status === 'empty' ? 'Empty' : status === 'low' ? 'Low' : 'Good'}</span>
                      </div>
                      <div className="inventory-stats">
                        <div className="inventory-stat"><div className="inventory-stat-value">{vial.totalMg}</div><div className="inventory-stat-label">mg total</div></div>
                        <div className="inventory-stat"><div className="inventory-stat-value">{vial.waterMl || '-'}</div><div className="inventory-stat-label">mL water</div></div>
                        <div className="inventory-stat"><div className="inventory-stat-value">{vial.remaining.toFixed(1)}</div><div className="inventory-stat-label">mg left</div></div>
                      </div>
                      <div className="inventory-progress"><div className={`inventory-progress-fill ${status === 'low' ? 'low' : status === 'empty' ? 'low' : percentRemaining < 50 ? 'medium' : 'high'}`} style={{ width: `${percentRemaining}%` }} /></div>
                      <div className="inventory-actions">
                        <button className="inventory-btn" onClick={() => { setEditingVial(vial); setShowInventoryModal(true); }}>Edit</button>
                        <button className="inventory-btn" onClick={() => {
                          const dose = prompt('Enter dose used (mg):');
                          if (dose && !isNaN(parseFloat(dose))) {
                            setInventory(prev => prev.map(v => v.id === vial.id ? { ...v, remaining: Math.max(0, v.remaining - parseFloat(dose)) } : v));
                          }
                        }}>Log Dose</button>
                        <button className="inventory-btn" onClick={() => {
                          if (confirm('Delete this vial?')) {
                            setInventory(prev => prev.filter(v => v.id !== vial.id));
                          }
                        }} style={{ color: 'var(--accent-red)', borderColor: 'var(--accent-red)' }}>Delete</button>
                      </div>
                    </div>
                  );
                })}
              </>
            )}
            
            {activeTab === 'calculator' && <ReconstitutionCalculator />}
          </main>
          
          <nav className="bottom-nav">
            <button className={`nav-item ${activeTab === 'today' ? 'active' : ''}`} onClick={() => setActiveTab('today')}><Icons.Home /><span>Today</span></button>
            <button className={`nav-item ${activeTab === 'schedules' ? 'active' : ''}`} onClick={() => setActiveTab('schedules')}><Icons.List /><span>Schedules</span></button>
            <button className={`nav-item ${activeTab === 'inventory' ? 'active' : ''}`} onClick={() => setActiveTab('inventory')}><Icons.Box /><span>Inventory</span></button>
            <button className={`nav-item ${activeTab === 'calculator' ? 'active' : ''}`} onClick={() => setActiveTab('calculator')}><Icons.Calculator /><span>Calc</span></button>
            <button className={`nav-item ${activeTab === 'database' ? 'active' : ''}`} onClick={() => setActiveTab('database')}><Icons.Database /><span>Database</span></button>
            <button className={`nav-item ${activeTab === 'settings' ? 'active' : ''}`} onClick={() => setActiveTab('settings')}><Icons.Settings /><span>Settings</span></button>
          </nav>
          
          {showModal && <ScheduleModal schedule={editingSchedule} onSave={saveSchedule} onDelete={deleteSchedule} onClose={() => { setShowModal(false); setEditingSchedule(null); }} />}
          
          {showInventoryModal && <InventoryModal vial={editingVial} onSave={(vial) => {
            if (editingVial) {
              setInventory(prev => prev.map(v => v.id === editingVial.id ? { ...vial, id: v.id } : v));
            } else {
              setInventory(prev => [...prev, { ...vial, id: Date.now().toString(), dateAdded: new Date().toISOString() }]);
            }
            setShowInventoryModal(false);
            setEditingVial(null);
          }} onClose={() => { setShowInventoryModal(false); setEditingVial(null); }} />}
        </div>
      );
    }
    
    // Reconstitution Calculator Component
    function ReconstitutionCalculator() {
      const [vialMg, setVialMg] = useState('');
      const [waterMl, setWaterMl] = useState('');
      const [customWater, setCustomWater] = useState('');
      const [desiredDose, setDesiredDose] = useState('');
      
      const waterPresets = [1, 2, 3, 4, 5, 6];
      const activeWater = customWater || waterMl;
      
      // Calculate units to inject
      // Formula: units = (desired_mcg * water_ml) / (vial_mg * 10)
      const calculateUnits = () => {
        const vial = parseFloat(vialMg);
        const water = parseFloat(activeWater);
        const dose = parseFloat(desiredDose);
        
        if (!vial || !water || !dose || vial <= 0 || water <= 0 || dose <= 0) return 0;
        
        // Convert: dose is in mcg, vial is in mg
        // Concentration = vial_mg / water_ml = mg/ml
        // Volume needed = dose_mcg / (concentration * 1000) = dose_mcg / (vial_mg * 1000 / water_ml) ml
        // Units on 100-unit syringe = volume_ml * 100
        const units = (dose * water) / (vial * 10);
        return Math.min(units, 100); // Cap at 100 units
      };
      
      const units = calculateUnits();
      const fillPercent = Math.min((units / 100) * 100, 100);
      
      const selectWaterPreset = (ml) => {
        setWaterMl(ml.toString());
        setCustomWater('');
      };
      
      const handleCustomWater = (value) => {
        setCustomWater(value);
        setWaterMl('');
      };
      
      return (
        <>
          <div className="section-header">
            <h2 className="section-title">Reconstitution Calculator</h2>
          </div>
          
          <div className="calc-section">
            <div className="calc-section-title">💉 Vial Information</div>
            <div className="calc-input-group">
              <label className="calc-input-label">Peptide Amount in Vial</label>
              <input 
                type="number" 
                className="calc-input" 
                placeholder="e.g., 5 or 10"
                value={vialMg}
                onChange={e => setVialMg(e.target.value)}
              />
              <div style={{ textAlign: 'center', marginTop: '4px', fontSize: '12px', color: 'var(--text-muted)' }}>milligrams (mg)</div>
            </div>
          </div>
          
          <div className="calc-section">
            <div className="calc-section-title">💧 Bacteriostatic Water</div>
            <div className="calc-input-group">
              <label className="calc-input-label">Select Amount Added</label>
              <div className="water-buttons">
                {waterPresets.map(ml => (
                  <button 
                    key={ml} 
                    className={`water-btn ${waterMl === ml.toString() && !customWater ? 'active' : ''}`}
                    onClick={() => selectWaterPreset(ml)}
                  >
                    {ml} mL
                  </button>
                ))}
              </div>
              <label className="calc-input-label">Or enter custom amount</label>
              <input 
                type="number" 
                className="calc-input" 
                placeholder="Custom mL"
                value={customWater}
                onChange={e => handleCustomWater(e.target.value)}
                step="0.5"
              />
            </div>
          </div>
          
          <div className="calc-section">
            <div className="calc-section-title">🎯 Desired Dose</div>
            <div className="calc-input-group">
              <label className="calc-input-label">How much do you want to inject?</label>
              <input 
                type="number" 
                className="calc-input" 
                placeholder="e.g., 250 or 500"
                value={desiredDose}
                onChange={e => setDesiredDose(e.target.value)}
              />
              <div style={{ textAlign: 'center', marginTop: '4px', fontSize: '12px', color: 'var(--text-muted)' }}>micrograms (mcg)</div>
            </div>
          </div>
          
          {vialMg && activeWater && desiredDose && (
            <>
              <div className="calc-result">
                <div className="calc-result-label">Draw to this mark on syringe</div>
                <div>
                  <span className="calc-result-value">{units.toFixed(1)}</span>
                  <span className="calc-result-unit">units</span>
                </div>
              </div>
              
              <div className="syringe-container">
                <div className="syringe-title">100 Unit Insulin Syringe</div>
                <div className="syringe-wrapper">
                  <div className="syringe-markings">
                    <span className="syringe-mark">0</span>
                    <span className="syringe-mark">10</span>
                    <span className="syringe-mark">20</span>
                    <span className="syringe-mark">30</span>
                    <span className="syringe-mark">40</span>
                    <span className="syringe-mark">50</span>
                    <span className="syringe-mark">60</span>
                    <span className="syringe-mark">70</span>
                    <span className="syringe-mark">80</span>
                    <span className="syringe-mark">90</span>
                    <span className="syringe-mark">100</span>
                  </div>
                  <div className="syringe">
                    <div className="syringe-fill" style={{ width: `${fillPercent}%` }}>
                      {units > 0 && (
                        <div className="dose-indicator" style={{ left: `${fillPercent}%` }}>
                          {units.toFixed(1)} units
                        </div>
                      )}
                    </div>
                    <div className="syringe-needle" />
                    <div className="syringe-plunger" />
                  </div>
                  <div className="syringe-ticks">
                    {[...Array(21)].map((_, i) => (
                      <div key={i} className={`syringe-tick ${i % 2 === 0 ? 'major' : ''}`} />
                    ))}
                  </div>
                </div>
              </div>
              
              <div className="calc-info">
                <div className="calc-info-title">📊 Your Concentration</div>
                <div className="calc-info-text">
                  {vialMg} mg in {activeWater} mL = <strong>{(parseFloat(vialMg) / parseFloat(activeWater)).toFixed(2)} mg/mL</strong>
                  <br />
                  Each 10 units = {((parseFloat(vialMg) * 100) / parseFloat(activeWater)).toFixed(0)} mcg
                </div>
              </div>
            </>
          )}
          
          <div className="calc-info" style={{ marginTop: '16px', background: 'rgba(139, 92, 246, 0.1)', borderColor: 'rgba(139, 92, 246, 0.3)' }}>
            <div className="calc-info-title" style={{ color: 'var(--accent-purple)' }}>ℹ️ How to Use</div>
            <div className="calc-info-text">
              1. Enter the mg amount on your peptide vial<br />
              2. Select or enter how much bacteriostatic water you added<br />
              3. Enter your desired dose in mcg<br />
              4. The calculator shows how many units to draw on a 100-unit syringe
            </div>
          </div>
        </>
      );
    }
    
    function InventoryModal({ vial, onSave, onClose }) {
      const [formData, setFormData] = useState({
        name: vial?.name || '',
        totalMg: vial?.totalMg || '',
        remaining: vial?.remaining ?? vial?.totalMg ?? '',
        waterMl: vial?.waterMl || '',
        notes: vial?.notes || ''
      });
      
      const handleSubmit = (e) => {
        e.preventDefault();
        onSave({
          ...formData,
          totalMg: parseFloat(formData.totalMg) || 0,
          remaining: parseFloat(formData.remaining) || parseFloat(formData.totalMg) || 0,
          waterMl: parseFloat(formData.waterMl) || 0
        });
      };
      
      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()}>
            <div className="modal-handle" />
            <div className="modal-header">
              <h2 className="modal-title">{vial ? 'Edit Vial' : 'Add Vial'}</h2>
              <button className="modal-close" onClick={onClose}><Icons.X /></button>
            </div>
            <form onSubmit={handleSubmit}>
              <div className="form-group">
                <label className="form-label">Peptide Name</label>
                <input type="text" className="form-input" placeholder="e.g., BPC-157" value={formData.name} onChange={e => setFormData(prev => ({ ...prev, name: e.target.value }))} required />
              </div>
              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Total Amount (mg)</label>
                  <input type="number" className="form-input" placeholder="e.g., 5" step="0.1" value={formData.totalMg} onChange={e => setFormData(prev => ({ ...prev, totalMg: e.target.value, remaining: prev.remaining || e.target.value }))} required />
                </div>
                <div className="form-group">
                  <label className="form-label">Remaining (mg)</label>
                  <input type="number" className="form-input" placeholder="e.g., 5" step="0.01" value={formData.remaining} onChange={e => setFormData(prev => ({ ...prev, remaining: e.target.value }))} />
                </div>
              </div>
              <div className="form-group">
                <label className="form-label">Bacteriostatic Water Added (mL)</label>
                <input type="number" className="form-input" placeholder="e.g., 2" step="0.5" value={formData.waterMl} onChange={e => setFormData(prev => ({ ...prev, waterMl: e.target.value }))} />
              </div>
              <div className="form-group">
                <label className="form-label">Notes</label>
                <input type="text" className="form-input" placeholder="Optional notes" value={formData.notes} onChange={e => setFormData(prev => ({ ...prev, notes: e.target.value }))} />
              </div>
              <button type="submit" className="form-submit">{vial ? 'Update Vial' : 'Add Vial'}</button>
            </form>
          </div>
        </div>
      );
    }
    
    function ScheduleModal({ schedule, onSave, onDelete, onClose }) {
      const [formData, setFormData] = useState({
        name: schedule?.name || '', dosage: schedule?.dosage || '', frequency: schedule?.frequency || 'once/day',
        daysPerWeek: schedule?.daysPerWeek || ['Mon', 'Wed', 'Fri'], timeOfDay: schedule?.timeOfDay || 'morning',
        startDate: schedule?.startDate || '', endDate: schedule?.endDate || '', cycleWeeks: schedule?.cycleWeeks || '', notes: schedule?.notes || ''
      });
      const [showSuggestions, setShowSuggestions] = useState(false);
      
      useEffect(() => {
        const handler = (e) => {
          const p = e.detail;
          setFormData(prev => ({ ...prev, name: p.name, dosage: p.defaultDose, notes: `${p.uses}` }));
        };
        window.addEventListener('prefillPeptide', handler);
        return () => window.removeEventListener('prefillPeptide', handler);
      }, []);
      
      const suggestions = formData.name.length > 1 ? PEPTIDE_DATABASE.filter(p => p.name.toLowerCase().includes(formData.name.toLowerCase())).slice(0, 5) : [];
      
      const selectSuggestion = (p) => {
        setFormData(prev => ({ ...prev, name: p.name, dosage: p.defaultDose }));
        setShowSuggestions(false);
      };
      
      const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      const toggleDay = (day) => setFormData(prev => ({ ...prev, daysPerWeek: prev.daysPerWeek.includes(day) ? prev.daysPerWeek.filter(d => d !== day) : [...prev.daysPerWeek, day] }));
      const handleSubmit = (e) => { e.preventDefault(); onSave({ ...formData, cycleWeeks: formData.cycleWeeks ? parseInt(formData.cycleWeeks) : null }); };
      
      return (
        <div className="modal-overlay" onClick={onClose}>
          <div className="modal" onClick={e => e.stopPropagation()}>
            <div className="modal-handle" />
            <div className="modal-header"><h2 className="modal-title">{schedule ? 'Edit Schedule' : 'New Schedule'}</h2><button className="modal-close" onClick={onClose}><Icons.X /></button></div>
            <form onSubmit={handleSubmit}>
              <div className="form-group">
                <label className="form-label">Peptide Name</label>
                <input type="text" className="form-input" placeholder="Search or type name..." value={formData.name} onChange={e => { setFormData(prev => ({ ...prev, name: e.target.value })); setShowSuggestions(true); }} onFocus={() => setShowSuggestions(true)} required />
                {showSuggestions && suggestions.length > 0 && (
                  <div className="peptide-suggestions">
                    {suggestions.map(p => (
                      <div key={p.id} className="peptide-suggestion" onClick={() => selectSuggestion(p)}>
                        <div className="peptide-suggestion-name">{p.name}</div>
                        <div className="peptide-suggestion-info">{p.defaultDose} • {p.frequency}</div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
              <div className="form-row">
                <div className="form-group"><label className="form-label">Dosage</label><input type="text" className="form-input" placeholder="e.g., 500 mcg" value={formData.dosage} onChange={e => setFormData(prev => ({ ...prev, dosage: e.target.value }))} required /></div>
                <div className="form-group"><label className="form-label">Frequency</label><select className="form-input form-select" value={formData.frequency} onChange={e => setFormData(prev => ({ ...prev, frequency: e.target.value }))}><option value="once/day">Once daily</option><option value="twice/day">Twice daily</option><option value="once/week">Once weekly</option><option value="twice/week">Twice weekly</option><option value="as needed">As needed</option></select></div>
              </div>
              <div className="form-group"><label className="form-label">Days of Week</label><div className="day-selector">{days.map(day => <button key={day} type="button" className={`day-chip ${formData.daysPerWeek.includes(day) ? 'selected' : ''}`} onClick={() => toggleDay(day)}>{day}</button>)}</div></div>
              <div className="form-group"><label className="form-label">Time of Day</label><select className="form-input form-select" value={formData.timeOfDay} onChange={e => setFormData(prev => ({ ...prev, timeOfDay: e.target.value }))}><option value="morning">Morning</option><option value="evening">Evening</option><option value="anytime">Anytime</option></select></div>
              <div className="form-row">
                <div className="form-group"><label className="form-label">Start Date</label><input type="date" className="form-input" value={formData.startDate} onChange={e => setFormData(prev => ({ ...prev, startDate: e.target.value }))} /></div>
                <div className="form-group"><label className="form-label">End Date</label><input type="date" className="form-input" value={formData.endDate} onChange={e => setFormData(prev => ({ ...prev, endDate: e.target.value }))} /></div>
              </div>
              <div className="form-group"><label className="form-label">Cycle Length (weeks)</label><input type="number" className="form-input" placeholder="e.g., 12" value={formData.cycleWeeks} onChange={e => setFormData(prev => ({ ...prev, cycleWeeks: e.target.value }))} /></div>
              <div className="form-group"><label className="form-label">Notes</label><input type="text" className="form-input" placeholder="Optional notes..." value={formData.notes} onChange={e => setFormData(prev => ({ ...prev, notes: e.target.value }))} /></div>
              <button type="submit" className="form-submit">{schedule ? 'Save Changes' : 'Add Schedule'}</button>
              {schedule && <button type="button" className="form-delete" onClick={() => { if (confirm('Delete?')) onDelete(schedule.id); }}>Delete Schedule</button>}
            </form>
          </div>
        </div>
      );
    }
    
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
